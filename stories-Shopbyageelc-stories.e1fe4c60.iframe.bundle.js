"use strict";(self.webpackChunkentertainer_redesign=self.webpackChunkentertainer_redesign||[]).push([[237],{"./src/config/firebase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{db:()=>db});var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/firebase/app/dist/esm/index.esm.js"),firebase_firestore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js");const app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.Wp)({apiKey:"AIzaSyDLmVO4qOiYb8dTm9tIUSUyZZXliuddo1c",authDomain:"storybook-58efc.firebaseapp.com",projectId:"storybook-58efc",storageBucket:"storybook-58efc.firebasestorage.app",messagingSenderId:"10714570266",appId:"1:10714570266:web:1086b72b26588d72193ba3"}),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.aU)(app)},"./src/stories/Shopbyageelc.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ShopByAgeElcContainer:()=>ShopByAgeElcContainer,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Shopbyageelc_stories});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),firebase=__webpack_require__("./src/config/firebase.js"),index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ShopByAgeElc=_ref=>{let{item1age,item1textunderage,item1link,item1dataelementtype,item1datapromotionindex,item1datapromotionname,item1datagtmvispollingid8511273_2666,item2age,item2textunderage,item2link,item2dataelementtype,item2datapromotionindex,item2datapromotionname,item3age,item3textunderage,item3link,item3dataelementtype,item3datapromotionindex,item3datapromotionname,item4age,item4textunderage,item4link,item4dataelementtype,item4datapromotionindex,item4datapromotionname,item4datagtmvispollingid8511273_2666,item5age,item5textunderage,item5link,item5dataelementtype,item5datapromotionindex,item5datapromotionname,item6age,item6textunderage,item6link,item6dataelementtype,item6datapromotionindex,item6datapromotionname}=_ref;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:"\n  .hp-shop-age {\n    margin: 40px auto 0;\n    padding: 0 20px;\n    max-width: 944px;\n  }\n\n  .hp-shop-age ul {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    margin: 20px auto 0;\n    padding: 0;\n  }\n\n  .hp-shop-age ul li {\n    display: flex;\n    flex-wrap: wrap;\n    align-content: center;\n    margin-top: 4vw;\n    padding: 0;\n    list-style: none;\n    width: calc(100% / 3 - 10px);\n    transition: opacity 0.5s;\n    -webkit-transition: opacity 0.5s;\n    opacity: 1;\n  }\n\n  .hp-shop-age ul li.zero-three-months {\n    margin: 0;\n    background: url(https://www.thetoyshop.com/medias/elc-hp-shop-by-age-train-0-3-months.png?context=bWFzdGVyfHJvb3R8MjY1Nzl8aW1hZ2UvcG5nfGFHRXlMMmcwWVM4eE1qRXpPREU1T0RneU56QXpPQzlsYkdNdGFIQXRjMmh2Y0MxaWVTMWhaMlV0ZEhKaGFXNHRNQzB6TFcxdmJuUm9jeTV3Ym1jfDViMTA3YTQyOTUzM2E4MDcwYjFjMzI3NTE2YzkzM2FjZjhlNTI1ZWYyMTljZDY1ZmNmOWJlMjBlNTFkMzRiYTg)\n      no-repeat;\n    background-size: contain;\n  }\n\n  .hp-shop-age ul li.three-six-months {\n    background: url(https://www.thetoyshop.com/medias/elc-hp-shop-by-age-train-3-6-months.png?context=bWFzdGVyfHJvb3R8MTk2Nzh8aW1hZ2UvcG5nfGFEUmlMMmcwWVM4eE1qRXpPREU1T0RnMU9UZ3dOaTlsYkdNdGFIQXRjMmh2Y0MxaWVTMWhaMlV0ZEhKaGFXNHRNeTAyTFcxdmJuUm9jeTV3Ym1jfDI2NjgyZjA2ZWMxMWY0NzZmYmVlNTMyZGY5MDFjMDg1YjQ4OTg2ZGI3MjViYjliZDg5YThjOTI3NTE0M2ZkODY)\n      no-repeat;\n    background-size: contain;\n  }\n\n  .hp-shop-age ul li.six-twelve-months {\n    background: url(https://www.thetoyshop.com/medias/elc-hp-shop-by-age-train-6-12-months.png?context=bWFzdGVyfHJvb3R8MTk1NjR8aW1hZ2UvcG5nfGFHUTVMMmd3TXk4eE1qRXpPREU1T1RBeU16WTBOaTlsYkdNdGFIQXRjMmh2Y0MxaWVTMWhaMlV0ZEhKaGFXNHROaTB4TWkxdGIyNTBhSE11Y0c1bnw3YmNlYjQ2ZDQ1MzliNzNlOTU0ZTA3MjBlOGFhM2Q4MGI3MGZiYTljNzNkMTdiM2U0OTFhNGRmMmZlM2U5ZDM5)\n      no-repeat;\n    background-size: contain;\n  }\n\n  .hp-shop-age ul li.one-two-years {\n    background: url(https://www.thetoyshop.com/medias/elc-hp-shop-by-age-train-1-2-years.png?context=bWFzdGVyfHJvb3R8MTk3OTR8aW1hZ2UvcG5nfGFETXdMMmd3TkM4eE1qRXpPREU1T1RBMU5qUXhOQzlsYkdNdGFIQXRjMmh2Y0MxaWVTMWhaMlV0ZEhKaGFXNHRNUzB5TFhsbFlYSnpMbkJ1Wnd8ZGNmYTQ5YzBmNGYwMzk1M2UzNzlkZjI3ODQ4YzBmZDEyMGZlZDgxYjQwOWI4ZWFhMmQ1ZmI0NmJlYTA0NjMxNg)\n      no-repeat;\n    background-size: contain;\n  }\n\n  .hp-shop-age ul li.two-three-years {\n    background: url(https://www.thetoyshop.com/medias/elc-hp-shop-by-age-train-2-3-years.png?context=bWFzdGVyfHJvb3R8MTk3MTZ8aW1hZ2UvcG5nfGFEZzNMMmd3TkM4eE1qRXpPREU1T1RBNE9URTRNaTlsYkdNdGFIQXRjMmh2Y0MxaWVTMWhaMlV0ZEhKaGFXNHRNaTB6TFhsbFlYSnpMbkJ1Wnd8YWU4M2VhNDRhYjNmZTJjNjA5Yjc0OTlhOGNiZTQ0ODQ2ZWFjY2RkYjU1ZWNjOWRjODExNTZkMjc4N2RhNTJlYw)\n      no-repeat;\n    background-size: contain;\n  }\n\n  .hp-shop-age ul li.three-four-years {\n    background: url(https://www.thetoyshop.com/medias/elc-hp-shop-by-age-train-3-4-years.png?context=bWFzdGVyfHJvb3R8MTk1OTV8aW1hZ2UvcG5nfGFEUXdMMmd3Tnk4eE1qRXpPREU1T1RFeU1UazFNQzlsYkdNdGFIQXRjMmh2Y0MxaWVTMWhaMlV0ZEhKaGFXNHRNeTAwTFhsbFlYSnpMbkJ1Wnd8YjhhMzdmNzdlYzQxNzg4OTJiYzU4ZjFjMWRiZDI4YjgzNWU5MWQ3MTRlODAwNzIzZjRjZDJjYWU2MDYyN2FiMQ)\n      no-repeat;\n    background-size: contain;\n  }\n\n  .hp-shop-age ul li a {\n    width: 100%;\n    color: #fff;\n  }\n\n  .hp-shop-age ul li:hover {\n    opacity: 0.5;\n  }\n\n  .hp-shop-age ul li img {\n    display: block;\n    width: 100%;\n  }\n\n  .hp-shop-age ul h3 {\n    display: block;\n    margin: 0;\n    padding: 3vw 0 10vw;\n    font-size: 6vw;\n    line-height: 100%;\n    font-weight: bold;\n    text-align: center;\n    letter-spacing: 0.5px;\n    color: #ffffff;\n    text-decoration: none;\n    text-transform: none;\n    width: 100%;\n  }\n\n  .hp-shop-age ul h3 span {\n    display: block;\n    font-size: 3.5vw;\n    line-height: 100%;\n    font-weight: bold;\n  }\n\n  .hp-shop-age ul li.zero-three-months h3 {\n    padding: 1vw 0 0 3vw;\n  }\n\n  @media (min-width: 768px) {\n    .hp-shop-age ul li {\n      margin: 5vw 0 0;\n      width: calc(100% / 3 - 10px);\n    }\n\n    .hp-shop-age ul li.zero-three-months {\n      margin: 0;\n      background: url(https://www.thetoyshop.com/medias/elc-hp-shop-by-age-train-0-3-months.png?context=bWFzdGVyfHJvb3R8MjY1Nzl8aW1hZ2UvcG5nfGFHRXlMMmcwWVM4eE1qRXpPREU1T0RneU56QXpPQzlsYkdNdGFIQXRjMmh2Y0MxaWVTMWhaMlV0ZEhKaGFXNHRNQzB6TFcxdmJuUm9jeTV3Ym1jfDViMTA3YTQyOTUzM2E4MDcwYjFjMzI3NTE2YzkzM2FjZjhlNTI1ZWYyMTljZDY1ZmNmOWJlMjBlNTFkMzRiYTg)\n        no-repeat;\n      background-size: contain;\n    }\n\n    .hp-shop-age ul h3 {\n      padding: 6vw 0 11vw;\n      font-size: 5vw;\n      line-height: 100%;\n      font-weight: bold;\n    }\n\n    .hp-shop-age ul h3 span {\n      font-size: 3vw;\n      line-height: 100%;\n      font-weight: bold;\n    }\n  }\n\n  @media (min-width: 1024px) {\n    .hp-shop-age ul {\n      padding: 0 0 20px;\n    }\n\n    .hp-shop-age ul li {\n      margin: 24px 0 0;\n      width: calc(100% / 6 - 20px);\n    }\n\n    .hp-shop-age ul h3 {\n      padding: 20px 0 50px;\n      font-size: 24px;\n      line-height: 100%;\n      font-weight: bold;\n    }\n\n    .hp-shop-age ul h3 span {\n      font-size: 16px;\n      line-height: 100%;\n      font-weight: bold;\n    }\n\n    .hp-shop-age ul li.zero-three-months h3 {\n      padding: 10px 0 0 15px;\n    }\n  }\n        "}),(0,jsx_runtime.jsx)("div",{class:"hp-shop-age",children:(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsxs)("li",{class:"zero-three-months",children:[(0,jsx_runtime.jsx)("a",{"data-element-type":item1dataelementtype,"data-promotion-index":item1datapromotionindex,"data-promotion-name":item1datapromotionname,href:item1link}),(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsxs)("a",{"data-element-type":item1dataelementtype,"data-promotion-index":item1datapromotionindex,"data-promotion-name":item1datapromotionname,href:item1link,children:[item1age," ",(0,jsx_runtime.jsx)("span",{children:item1textunderage})]})}),(0,jsx_runtime.jsx)("a",{"data-element-type":item1dataelementtype,"data-promotion-index":item1datapromotionindex,"data-promotion-name":item1datapromotionname,href:item1link,"data-gtm-vis-polling-id8511273_2666":item1datagtmvispollingid8511273_2666})]}),(0,jsx_runtime.jsxs)("li",{class:"three-six-months",children:[(0,jsx_runtime.jsx)("a",{"data-element-type":item2dataelementtype,"data-promotion-index":item2datapromotionindex,"data-promotion-name":item2datapromotionname,href:item2link}),(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsxs)("a",{"data-element-type":item2dataelementtype,"data-promotion-index":item2datapromotionindex,"data-promotion-name":item2datapromotionname,href:item2link,children:[item2age," ",(0,jsx_runtime.jsx)("span",{children:item2textunderage})]})}),(0,jsx_runtime.jsx)("a",{"data-element-type":item2dataelementtype,"data-promotion-index":item2datapromotionindex,"data-promotion-name":item2datapromotionname,href:item2link})]}),(0,jsx_runtime.jsxs)("li",{class:"six-twelve-months",children:[(0,jsx_runtime.jsx)("a",{"data-element-type":item1dataelementtype,"data-promotion-index":item3datapromotionindex,"data-promotion-name":item3datapromotionname,href:item3link}),(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsxs)("a",{"data-element-type":item3dataelementtype,"data-promotion-index":item3datapromotionindex,"data-promotion-name":item3datapromotionname,href:item3link,children:[item3age," ",(0,jsx_runtime.jsx)("span",{children:item3textunderage})]})}),(0,jsx_runtime.jsx)("a",{"data-element-type":item3dataelementtype,"data-promotion-index":item3datapromotionindex,"data-promotion-name":item3datapromotionname,href:item3link})]}),(0,jsx_runtime.jsxs)("li",{class:"one-two-years",children:[(0,jsx_runtime.jsx)("a",{"data-element-type":item4dataelementtype,"data-promotion-index":item4datapromotionindex,"data-promotion-name":item4datapromotionname,href:item4link,"data-gtm-vis-polling-id8511273_2666":item4datagtmvispollingid8511273_2666}),(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsxs)("a",{"data-element-type":item4dataelementtype,"data-promotion-index":item4datapromotionindex,"data-promotion-name":item4datapromotionname,href:item4link,children:[item4age," ",(0,jsx_runtime.jsx)("span",{children:item4textunderage})]})}),(0,jsx_runtime.jsx)("a",{"data-element-type":item4dataelementtype,"data-promotion-index":item4datapromotionindex,"data-promotion-name":item4datapromotionname,href:item4link})]}),(0,jsx_runtime.jsxs)("li",{class:"two-three-years",children:[(0,jsx_runtime.jsx)("a",{"data-element-type":item5dataelementtype,"data-promotion-index":item5datapromotionindex,"data-promotion-name":item5datapromotionname,href:item5link}),(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsxs)("a",{"data-element-type":item5dataelementtype,"data-promotion-index":item5datapromotionindex,"data-promotion-name":item5datapromotionname,href:item5link,children:[item5age," ",(0,jsx_runtime.jsx)("span",{children:item5textunderage})]})}),(0,jsx_runtime.jsx)("a",{"data-element-type":item5dataelementtype,"data-promotion-index":item5datapromotionindex,"data-promotion-name":item5datapromotionname,href:item5link})]}),(0,jsx_runtime.jsxs)("li",{class:"three-four-years",children:[(0,jsx_runtime.jsx)("a",{"data-element-type":item6dataelementtype,"data-promotion-index":item6datapromotionindex,"data-promotion-name":item6datapromotionname,href:item6link}),(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsxs)("a",{"data-element-type":item6dataelementtype,"data-promotion-index":item6datapromotionindex,"data-promotion-name":item6datapromotionname,href:item6link,children:[item6age," ",(0,jsx_runtime.jsx)("span",{children:item6textunderage})]})}),(0,jsx_runtime.jsx)("a",{"data-element-type":item6dataelementtype,"data-promotion-index":item6datapromotionindex,"data-promotion-name":item6datapromotionname,href:item6link})]})]})})]})};ShopByAgeElc.__docgenInfo={description:"Primary UI component for user interaction",methods:[],displayName:"ShopByAgeElc",props:{item1age:{description:"contents",type:{name:"string"},required:!1},item1textunderage:{description:"",type:{name:"string"},required:!1},item1link:{description:"",type:{name:"string"},required:!1},item1dataelementtype:{description:"",type:{name:"string"},required:!1},item1datapromotionindex:{description:"",type:{name:"string"},required:!1},item1datapromotionname:{description:"",type:{name:"string"},required:!1},item2age:{description:"",type:{name:"string"},required:!1},item2textunderage:{description:"",type:{name:"string"},required:!1},item2link:{description:"",type:{name:"string"},required:!1},item2dataelementtype:{description:"",type:{name:"string"},required:!1},item2datapromotionindex:{description:"",type:{name:"string"},required:!1},item2datapromotionname:{description:"",type:{name:"string"},required:!1},item3age:{description:"",type:{name:"string"},required:!1},item3textunderage:{description:"",type:{name:"string"},required:!1},item3link:{description:"",type:{name:"string"},required:!1},item3dataelementtype:{description:"",type:{name:"string"},required:!1},item3datapromotionindex:{description:"",type:{name:"string"},required:!1},item3datapromotionname:{description:"",type:{name:"string"},required:!1},item4age:{description:"",type:{name:"string"},required:!1},item4textunderage:{description:"",type:{name:"string"},required:!1},item4link:{description:"",type:{name:"string"},required:!1},item4dataelementtype:{description:"",type:{name:"string"},required:!1},item4datapromotionindex:{description:"",type:{name:"string"},required:!1},item4datapromotionname:{description:"",type:{name:"string"},required:!1},item5age:{description:"",type:{name:"string"},required:!1},item5textunderage:{description:"",type:{name:"string"},required:!1},item5link:{description:"",type:{name:"string"},required:!1},item5dataelementtype:{description:"",type:{name:"string"},required:!1},item5datapromotionindex:{description:"",type:{name:"string"},required:!1},item5datapromotionname:{description:"",type:{name:"string"},required:!1},item6age:{description:"",type:{name:"string"},required:!1},item6textunderage:{description:"",type:{name:"string"},required:!1},item6link:{description:"",type:{name:"string"},required:!1},item6dataelementtype:{description:"",type:{name:"string"},required:!1},item6datapromotionindex:{description:"",type:{name:"string"},required:!1},item6datapromotionname:{description:"",type:{name:"string"},required:!1}}};var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/preview-api");const _excluded=["user"],Shopbyageelc_stories={title:"ELC/Shop By Age",component:ShopByAgeElc,parameters:{layout:"fullscreen"},argTypes:{user:{options:["stories","hasina","shermin","sam"],control:{type:"select"}}}},ShopByAgeElcContainer={args:{user:"stories",item1age:"",item1textunderage:"",item1link:"",item1dataelementtype:"",item1datapromotionindex:"",item1datapromotionname:"",item2age:"",item2textunderage:"",item2link:"",item2dataelementtype:"",item2datapromotionindex:"",item2datapromotionname:"",item3age:"",item3textunderage:"",item3link:"",item3dataelementtype:"",item3datapromotionindex:"",item3datapromotionname:"",item4age:"",item4textunderage:"",item4link:"",item4dataelementtype:"",item4datapromotionindex:"",item4datapromotionname:"",item5age:"",item5textunderage:"",item5link:"",item5dataelementtype:"",item5datapromotionindex:"",item5datapromotionname:"",item6age:"",item6textunderage:"",item6link:"",item6dataelementtype:"",item6datapromotionindex:"",item6datapromotionname:""},render:function Render(args){const[currentArgs,updateArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),isLoadingRef=(0,react.useRef)(!1),lastUserRef=(0,react.useRef)(args.user),lastSyncedData=(0,react.useRef)({});return(0,react.useEffect)((()=>{(async()=>{isLoadingRef.current=!0,lastUserRef.current=args.user;try{const docRef=(0,index_esm.H9)(firebase.db,args.user,"elcshopbyage"),snap=await(0,index_esm.x7)(docRef);if(snap.exists()){const firestoreData=snap.data();lastSyncedData.current=firestoreData,updateArgs((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)({},currentArgs),firestoreData),{},{user:args.user}))}}catch(e){console.error("Firestore load error:",e)}isLoadingRef.current=!1})()}),[args.user]),(0,react.useEffect)((()=>{if(isLoadingRef.current)return;const selectedUser=lastUserRef.current;if(currentArgs.user!==selectedUser)return;const{user}=currentArgs,fields=(0,objectWithoutProperties.A)(currentArgs,_excluded),prevFields=lastSyncedData.current;if(!Object.entries(fields).some((_ref=>{let[k,v]=_ref;return prevFields[k]!==v})))return;lastSyncedData.current=fields;(async()=>{try{const docRef=(0,index_esm.H9)(firebase.db,selectedUser,"elcshopbyage");await(0,index_esm.mZ)(docRef,fields),console.log("UPDATED:",selectedUser,fields)}catch(e){console.error("Firestore update error:",e)}})()}),[currentArgs]),(0,jsx_runtime.jsx)(ShopByAgeElc,(0,objectSpread2.A)({},args))}},__namedExportsOrder=["ShopByAgeElcContainer"];ShopByAgeElcContainer.parameters={...ShopByAgeElcContainer.parameters,docs:{...ShopByAgeElcContainer.parameters?.docs,source:{originalSource:"{\n  args: {\n    user: 'stories',\n    item1age: '',\n    item1textunderage: '',\n    item1link: '',\n    item1dataelementtype: '',\n    item1datapromotionindex: '',\n    item1datapromotionname: '',\n    item2age: '',\n    item2textunderage: '',\n    item2link: '',\n    item2dataelementtype: '',\n    item2datapromotionindex: '',\n    item2datapromotionname: '',\n    item3age: '',\n    item3textunderage: '',\n    item3link: '',\n    item3dataelementtype: '',\n    item3datapromotionindex: '',\n    item3datapromotionname: '',\n    item4age: '',\n    item4textunderage: '',\n    item4link: '',\n    item4dataelementtype: '',\n    item4datapromotionindex: '',\n    item4datapromotionname: '',\n    item5age: '',\n    item5textunderage: '',\n    item5link: '',\n    item5dataelementtype: '',\n    item5datapromotionindex: '',\n    item5datapromotionname: '',\n    item6age: '',\n    item6textunderage: '',\n    item6link: '',\n    item6dataelementtype: '',\n    item6datapromotionindex: '',\n    item6datapromotionname: ''\n  },\n  render: function Render(args) {\n    const [currentArgs, updateArgs] = useArgs();\n    const isLoadingRef = useRef(false); // prevents writing during load\n    const lastUserRef = useRef(args.user); // track selected user\n    const lastSyncedData = useRef({}); // prevent write loops\n\n    // -------------------------------------------------------\n    // 1. LOAD DATA FROM SELECTED USER\n    // -------------------------------------------------------\n    useEffect(() => {\n      const load = async () => {\n        isLoadingRef.current = true; // BLOCK updates\n        lastUserRef.current = args.user;\n        try {\n          const docRef = doc(db, args.user, \"elcshopbyage\");\n          const snap = await getDoc(docRef);\n          if (snap.exists()) {\n            const firestoreData = snap.data();\n            lastSyncedData.current = firestoreData;\n\n            // Replace storybook args with loaded data\n            updateArgs({\n              ...currentArgs,\n              ...firestoreData,\n              user: args.user\n            });\n          }\n        } catch (e) {\n          console.error(\"Firestore load error:\", e);\n        }\n        isLoadingRef.current = false; // allow updates again\n      };\n      load();\n    }, [args.user]);\n\n    // -------------------------------------------------------\n    // 2. SYNC ONLY FIELD CHANGES (NOT USER CHANGE)\n    // -------------------------------------------------------\n    useEffect(() => {\n      if (isLoadingRef.current) return; // Don't sync during load\n\n      const selectedUser = lastUserRef.current;\n\n      // Don't sync if this change is caused by selecting a new user\n      if (currentArgs.user !== selectedUser) return;\n\n      // Remove user field before writing\n      const {\n        user,\n        ...fields\n      } = currentArgs;\n\n      // Prevent re-writing unchanged data\n      const prevFields = lastSyncedData.current;\n      const changed = Object.entries(fields).some(([k, v]) => prevFields[k] !== v);\n      if (!changed) return;\n      lastSyncedData.current = fields;\n      const send = async () => {\n        try {\n          const docRef = doc(db, selectedUser, \"elcshopbyage\");\n          await updateDoc(docRef, fields);\n          console.log(\"UPDATED:\", selectedUser, fields);\n        } catch (e) {\n          console.error(\"Firestore update error:\", e);\n        }\n      };\n      send();\n    }, [currentArgs]);\n    return <ShopByAgeElc {...args} />;\n  }\n}",...ShopByAgeElcContainer.parameters?.docs?.source}}}}}]);