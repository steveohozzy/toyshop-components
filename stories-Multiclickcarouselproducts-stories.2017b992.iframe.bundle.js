"use strict";(self.webpackChunkentertainer_redesign=self.webpackChunkentertainer_redesign||[]).push([[360],{"./src/config/firebase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{db:()=>db});var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/firebase/app/dist/esm/index.esm.js"),firebase_firestore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js");const app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.Wp)({apiKey:"AIzaSyDLmVO4qOiYb8dTm9tIUSUyZZXliuddo1c",authDomain:"storybook-58efc.firebaseapp.com",projectId:"storybook-58efc",storageBucket:"storybook-58efc.firebasestorage.app",messagingSenderId:"10714570266",appId:"1:10714570266:web:1086b72b26588d72193ba3"}),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.aU)(app)},"./src/stories/Multiclickcarouselproducts.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MulticlickCarouselProducts:()=>MulticlickCarouselProducts,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Multiclickcarouselproducts_stories});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),firebase=__webpack_require__("./src/config/firebase.js"),index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");class Carousel{constructor(wrapper){this.wrapper=wrapper,this.carousel=wrapper.querySelector(".carousel-right-panel"),this.leftPanel=wrapper.querySelector(".carousel-left-panel"),this.slides=wrapper.querySelectorAll(".slide"),this.leftNav=wrapper.querySelector(".left-nav"),this.rightNav=wrapper.querySelector(".right-nav"),this.index=0,this.animating=!1,this.isDragging=!1,this.startX=0,this.currentTranslate=0,this.animationID=null,this.moved=!1,this.autoSlideInterval=null,this.autoDirection="next",1===this.slides.length?(this.slides[0].classList.add("active"),this.slideIn(this.slides[0],this.autoDirection),setTimeout((()=>this.adjustHeight()),50),this.leftNav&&(this.leftNav.style.display="none"),this.rightNav&&(this.rightNav.style.display="none"),this.carousel.style.cursor="default"):(this.initEvents(),this.slides[0].classList.add("active"),this.slideIn(this.slides[0],this.autoDirection),setTimeout((()=>this.adjustHeight()),50)),this.updateNavVisibility()}slideIn(slide,direction){direction=direction||"next";slide.querySelectorAll(".masonryItem").forEach(((box,i)=>{box.style.transition="none",box.style.transform="next"===direction?"translateX(150vw) scale(0.9)":"translateX(-150vw) scale(0.9)",box.style.opacity=0,box.offsetHeight,setTimeout((()=>{box.style.transition="transform 1s cubic-bezier(0.25,1.1,0.35,1), opacity 1s ease",box.style.transform="translateX(0) scale(1)",box.style.opacity=1}),100*i)}))}slideOut(slide,direction){direction=direction||"next";const items=slide.querySelectorAll(".masonryItem"),total=items.length;items.forEach(((box,i)=>{setTimeout((()=>{box.style.transition="transform 0.8s ease, opacity 0.8s ease",box.style.transform="next"===direction?"translateX(-150vw) scale(0.9)":"translateX(150vw) scale(0.9)",box.style.opacity=0}),"next"===direction?70*i:70*(total-1-i))}))}adjustHeight(){let maxH=0;this.slides.forEach((slide=>{slide.style.opacity=1,slide.style.position="relative";const h=slide.scrollHeight;h>maxH&&(maxH=h),slide.style.opacity="",slide.style.position=""})),this.carousel.style.minHeight=maxH+100+"px",this.leftPanel.style.height=maxH+100+"px",document.documentElement.clientWidth>900&&(this.carousel.style.minHeight=maxH+40+"px",this.leftPanel.style.height=maxH+40+"px")}goTo(next,direction,userInitiated){if(this.animating||next===this.index)return;this.animating=!0,direction||(direction=next>this.index?"next":"prev"),userInitiated&&(this.autoDirection=direction);const oldSlide=this.slides[this.index],newSlide=this.slides[next];newSlide.classList.add("active"),this.slideIn(newSlide,direction),this.slideOut(oldSlide,direction),setTimeout((()=>{oldSlide.classList.remove("active"),this.index=next,this.adjustHeight(),this.animating=!1}),1200),this.resetAutoSlide()}nextSlide(){this.goTo((this.index+1)%this.slides.length,"next")}prevSlide(){this.goTo((this.index-1+this.slides.length)%this.slides.length,"prev")}startAutoSlide(){clearInterval(this.autoSlideInterval),this.autoSlideInterval=setInterval((()=>{"next"===this.autoDirection?this.nextSlide():this.prevSlide()}),4e3)}resetAutoSlide(){this.startAutoSlide()}touchStart(e){this.animating||(this.isDragging=!0,this.startX=-1!==e.type.indexOf("mouse")?e.pageX:e.touches[0].clientX,this.moved=!1,this.animationID=requestAnimationFrame((()=>this.animation())),this.carousel.classList.add("dragging"))}touchMove(e){if(!this.isDragging||this.animating)return;const delta=(-1!==e.type.indexOf("mouse")?e.pageX:e.touches[0].clientX)-this.startX;this.currentTranslate=delta,Math.abs(delta)>5&&(this.moved=!0);const inner=this.slides[this.index].querySelector(".slide-inner");inner&&(inner.style.transform="translateX("+this.currentTranslate+"px)")}touchEnd(){cancelAnimationFrame(this.animationID),this.isDragging=!1;const movedX=this.currentTranslate;this.carousel.classList.remove("dragging");const inner=this.slides[this.index].querySelector(".slide-inner");inner&&(inner.style.transition="transform 0.3s ease"),movedX<-50?this.goTo((this.index+1)%this.slides.length,"next",!0):movedX>50?this.goTo((this.index-1+this.slides.length)%this.slides.length,"prev",!0):inner&&(inner.style.transform="translateX(0)",setTimeout((()=>{inner.style.transition="",inner.style.transform=""}),300)),this.currentTranslate=0}animation(){this.setSliderPosition(),this.isDragging&&requestAnimationFrame((()=>this.animation()))}setSliderPosition(){const inner=this.slides[this.index].querySelector(".slide-inner");inner&&(inner.style.transform="translateX("+this.currentTranslate+"px)")}initEvents(){this.carousel.addEventListener("mousedown",(e=>this.touchStart(e))),this.carousel.addEventListener("mousemove",(e=>this.touchMove(e))),this.carousel.addEventListener("mouseup",(()=>this.touchEnd())),this.carousel.addEventListener("mouseleave",(()=>{this.isDragging&&this.touchEnd()})),this.carousel.addEventListener("touchstart",(e=>this.touchStart(e))),this.carousel.addEventListener("touchmove",(e=>this.touchMove(e)),{passive:!1}),this.carousel.addEventListener("touchend",(()=>this.touchEnd())),this.carousel.addEventListener("click",(e=>{this.moved&&(e.preventDefault(),e.stopPropagation())}),!0),this.leftNav&&this.leftNav.addEventListener("click",(()=>{this.goTo((this.index-1+this.slides.length)%this.slides.length,"next",!0)})),this.rightNav&&this.rightNav.addEventListener("click",(()=>{this.goTo((this.index+1)%this.slides.length,"prev",!0)})),window.addEventListener("resize",(()=>{setTimeout((()=>this.adjustHeight()),100)}))}updateNavVisibility(){this.leftNav&&this.rightNav&&(this.slides.length>1?(this.leftNav.style.display="",this.rightNav.style.display="",this.carousel.style.cursor="grab"):(this.leftNav.style.display="none",this.rightNav.style.display="none",this.carousel.style.cursor="default"))}}function normalizeShimmers(){let always=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const wrapper=document.querySelector(".carousel-wrapper-component");if(!wrapper)return;const carousel=wrapper.querySelector(".carousel-right-panel");if(!carousel)return;window.innerWidth;const itemsPerSlide=document.querySelector(".carousel-wrapper-component").getAttribute("data-items-per-slide");let slides=Array.from(carousel.querySelectorAll(".slide"));0!==slides.length&&slides.forEach(((slide,index)=>{if(always&&index>0)return void slide.remove();const masonry=slide.querySelector(".masonry");if(!masonry)return;Array.from(masonry.querySelectorAll(".masonryItem")).forEach(((item,i)=>{i>=itemsPerSlide&&item.remove()}))}))}function loadFromIframe(){const iframe=document.createElement("iframe");iframe.src="${categoryurl}",iframe.style.display="none",document.body.appendChild(iframe);let attempts=0;const fastScan=setInterval((()=>{attempts++;const doc=iframe.contentDocument;if(!doc)return void(attempts>=80&&(clearInterval(fastScan),iframe.remove()));const items=doc.querySelectorAll(".product__listing.product__grid .product-item"),maxItems=(document.querySelector(".carousel-wrapper-component").getAttribute("data-items-per-slide"),document.querySelector(".carousel-wrapper-component").getAttribute("data-max-items"));items.length<maxItems||(clearInterval(fastScan),iframe.remove(),normalizeShimmers(!1))}),50)}!function normalizeInitialShimmers(){const wrapper=document.querySelector(".carousel-wrapper-component");if(!wrapper)return;const carousel=wrapper.querySelector(".carousel-right-panel"),slides=Array.from(carousel.querySelectorAll(".slide")),itemsPerSlide=document.querySelector(".carousel-wrapper-component").getAttribute("data-items-per-slide");slides.forEach(((slide,index)=>{if(index>0)return void slide.remove();slide.querySelector(".masonry").querySelectorAll(".masonryItem").forEach(((item,i)=>{i>=itemsPerSlide&&item.remove()}))}))}(),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".carousel-wrapper-component").forEach((wrapper=>{wrapper.carouselInstance=new Carousel(wrapper)})),document.querySelectorAll(".masonryItem").forEach((i=>i.classList.add("loading"))),normalizeShimmers(!0),loadFromIframe()}));const MulticlickCarouselProductFeed=_ref=>{let{categoryurl,maxItems,itemsPerSlide=6,itemsPerRow=3,itemsPerRowMobile=2,background,titlecolor,textcolor,buttonbackground,buttontextcolor,buttonicon,arrowsBackground,arrowsColor,title,blurb,buttontext,link,logo,logoalt,dataElementType,datapromotionindex,datapromotionname}=_ref;const wrapperRef=(0,react.useRef)(null);return(0,react.useLayoutEffect)((()=>{if(!wrapperRef.current)return;const slides=wrapperRef.current.querySelector(".carousel-right-panel").querySelectorAll(".slide"),itemsPerSlide=document.querySelector(".carousel-wrapper-component").getAttribute("data-items-per-slide");slides.forEach(((slide,index)=>{if(index>0)return void slide.remove();slide.querySelector(".masonry").querySelectorAll(".masonryItem").forEach(((item,i)=>{i>=itemsPerSlide&&item.remove()}))}));const instance=new Carousel(wrapperRef.current);return wrapperRef.current.carouselInstance=instance,loadFromIframe(),()=>{clearInterval(instance.autoSlideInterval)}}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:"\n    .carousel-right-panel,\n  .carousel-right-panel * {\n    user-select: none;\n    -webkit-user-drag: none;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .masonry img {\n    pointer-events: auto;\n  }\n\n  .carousel-wrapper-component h1 {\n    font-size: 38px;\n  }\n  .carousel-wrapper-component p {\n    font-size: 18px;\n  }\n\n  .carousel-wrapper-component {\n    font-family: Inter, sans-serif;\n    display: flex;\n    gap: 20px;\n    align-items: center;\n    width: 100%;\n    border-radius: 16px;\n    background-color: #18499b;\n  }\n\n  .carousel-left-panel {\n    flex: 1;\n    padding: 30px;\n    color: #fff;\n    border-radius: 16px;\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  @media (max-width: 1024px) {\n    .carousel-left-panel {\n      height: auto !important;\n      padding: 15px 15px 0;\n    }\n  }\n\n  .carousel-left-panel .left-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n  }\n\n  .carousel-left-panel .left-content .panel-logo {\n    max-height: 100px;\n    width: auto;\n  }\n\n  .left-background {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .carousel-right-panel {\n    flex: 1.6;\n    position: relative;\n    overflow: hidden;\n    border-radius: 16px;\n    width: 100%;\n    padding: 20px;\n    cursor: grab;\n  }\n\n  .carousel-right-panel.dragging {\n    cursor: grabbing;\n  }\n\n  @media (max-width: 1024px) {\n    .carousel-right-panel {\n      padding: 0 15px;\n    }\n  }\n\n  .slide {\n    position: absolute;\n    top: 10px;\n    left: 20px;\n    width: calc(100% - 40px);\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.25s, transform 0.25s;\n  }\n\n  .slide.active {\n    opacity: 1;\n    pointer-events: auto;\n  }\n\n  .slide-inner {\n    transition: transform 0.3s ease;\n  }\n\n  .masonry {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    width: 100%;\n    padding: 10px;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .masonryItem {\n    border-radius: 12px;\n    overflow: hidden;\n    transform: translateX(150vw) scale(0.9);\n    transition: transform 1.25s cubic-bezier(0.25, 1.1, 0.35, 1);\n    background-color: #fff;\n    width: calc(100% / ".concat(itemsPerRowMobile," - 15px);\n  }\n\n  @media (min-width: 1024px) {\n    .masonryItem {\n      width: calc(100% / ").concat(itemsPerRow,' - 15px);\n    }\n  }\n\n  .masonryItem.tall {\n    aspect-ratio: 560/318;\n  }\n  .masonryItem .rating-wrapper,\n  .masonryItem .addtocart,\n  .masonryItem .productListerGridImageBadge {\n    display: none;\n  }\n\n  .masonryItem .product-item-inner {\n    display: grid !important;\n    grid-template-columns: 1fr 1fr !important; /* equal columns */\n    align-items: start;\n    gap: 10px;\n    width: 100%;\n  }\n\n  .masonryItem .product-item-inner img {\n    width: 100%;\n    height: auto;\n  }\n\n  .masonryItem .product-item-inner .details {\n    padding: 10px;\n  }\n\n  .masonryItem .product-item-inner .grid-pricing {\n    display: flex;\n    gap: 5px;\n    font-family: "Nunito Bold", "Tahoma Bold", sans-serif;\n    margin-top: 10px;\n  }\n  .masonryItem .product-item-inner .grid-pricing .price {\n    font-family: "Nunito Bold", "Tahoma Bold", sans-serif;\n  }\n  .masonryItem .product-item-inner .details .name {\n      display: -webkit-box;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      font-family: "Nunito Bold", "Tahoma Bold", sans-serif;\n    }\n  @media (max-width: 767px) {\n    .masonryItem .product-item-inner {\n      grid-template-columns: 1fr !important; /* equal columns */\n    }\n    .masonryItem .product-item-inner .details .name {\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n    }\n    .masonryItem.tall {\n      aspect-ratio: 318/620;\n    }\n  }\n\n  @media (max-width: 900px) {\n    .masonry {\n      grid-template-columns: repeat(2, 1fr);\n    }\n  }\n\n  @media (max-width: 1200px) {\n    .carousel-wrapper-component {\n      flex-direction: column;\n    }\n  }\n\n  .carousel-nav {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    background: rgb(69, 228, 39);\n    color: #000;\n    font-size: 30px;\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    text-align: center;\n    border-radius: 50%;\n    cursor: pointer;\n    user-select: none;\n    z-index: 10;\n    opacity: 0.4;\n    transition: opacity 0.3s, color 0.3s;\n  }\n\n  .carousel-nav:hover {\n    opacity: 0.8;\n  }\n\n  .left-nav {\n    left: 10px;\n  }\n  .right-nav {\n    right: 10px;\n  }\n\n  /* LOADING SHIMMER */\n  .masonryItem {\n    position: relative;\n    background: #fff;\n    overflow: hidden;\n  }\n\n  .masonryItem.loading::before {\n    content: "";\n    position: absolute;\n    inset: 0;\n    background: linear-gradient(90deg, #e3e3e3 0%, #f5f5f5 50%, #e3e3e3 100%);\n    background-size: 200% 100%;\n    animation: shimmer 1.2s infinite;\n    z-index: 2;\n  }\n\n  @keyframes shimmer {\n    0% {\n      background-position: -200% 0;\n    }\n    100% {\n      background-position: 200% 0;\n    }\n  }\n\n  /* Hide real content while loading */\n  .masonryItem.loading > * {\n    opacity: 0;\n  }\n\n  /* added extra button */\n  .masonryItem .details-link {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50px;\n    background-color: #009e44;\n    color: #fff;\n    font-size: 16px;\n    font-weight: bold;\n    text-decoration: none;\n    padding: 10px 20px;\n    box-shadow: 0 0 5px rgba(3, 33, 33, 0.3);\n    transition: all 0.3s;\n    margin-top: 10px;\n  }\n\n  .masonryItem .details-link:hover {\n    background-color: #afcb17;\n    scale: 1.05;\n    box-shadow: 0 0 18px rgba(3, 33, 33, 0.3);\n    color: #fff;\n  }\n\n  .carousel-left-panel .hero-button {\n        margin-top: 20px;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50px;\n        background: ').concat(buttonbackground,";\n        color: ").concat(buttontextcolor,";\n        font-size: 16px;\n        font-weight: bold;\n        text-decoration: none;\n        padding: 10px 30px 10px 10px;\n        height: 45px;\n        box-shadow: 0 0 5px rgba(3,33,33,.3);\n        border: 3px solid #DBE3FF;\n        border-color: ").concat(buttontextcolor,";\n        transition: all 0.3s;\n    }\n\n    .carousel-left-panel .hero-button:hover {\n        scale: 1.05;\n        box-shadow: 0 0 18px rgba(3,33,33,.3);\n    }\n\n    .carousel-left-panel .hero-button .basket-icon {\n        transition: all 0.3s;\n        transform: rotate(15deg);\n        margin-left: 5px;\n    }\n\n    .carousel-left-panel .hero-button:hover .basket-icon {\n        transform: rotate(-10deg)\n    }\n\n    .carousel-left-panel .hero-button .star-start {\n        position: relative;\n        top: -3px;\n    }\n\n    .carousel-left-panel .hero-button .swoosh-container {\n        display: flex;\n        align-items: center;\n        justify-content: end;\n        margin-right: 5px;\n        width: 25px;\n    }\n\n    .carousel-left-panel .hero-button .swoosh {\n        display: block;\n        width: 0;\n        height: 3px;\n        margin-top: -3px;\n        margin-left: -2px;\n        transform: rotate(15deg);\n        background: #fff;\n        transition: all 0.3s;\n    }\n\n    .carousel-left-panel .hero-button:hover .swoosh {\n        width: 7px;\n    }\n\n    .carousel-left-panel .hero-button .star-end {\n        position: relative;\n        bottom: -5px;\n        transition: all 0.3s;\n    }\n\n    .carousel-left-panel .hero-button:hover .star-end {\n        scale: 1.1;\n        transform: rotate(30deg);\n    }\n\n    .carousel-left panel-logo {\n      margin-bottom: 20px;\n    }\n        ")}),(0,jsx_runtime.jsxs)("div",{class:"carousel-wrapper-component",ref:wrapperRef,"data-items-per-slide":itemsPerSlide,"data-max-items":maxItems,style:{background},children:[(0,jsx_runtime.jsx)("div",{class:"carousel-left-panel",children:(0,jsx_runtime.jsxs)("div",{class:"left-content",children:[logo&&(0,jsx_runtime.jsx)("img",{src:logo,alt:logoalt,class:"panel-logo"}),title&&(0,jsx_runtime.jsx)("h1",{style:{color:titlecolor},children:title}),blurb&&(0,jsx_runtime.jsx)("p",{style:{color:textcolor},children:blurb}),buttontext&&(0,jsx_runtime.jsx)("div",{class:"button-container",children:(0,jsx_runtime.jsxs)("a",{href:link,class:"hero-button","data-element-type":dataElementType,"data-promotion-index":datapromotionindex,"data-promotion-name":datapromotionname,style:{background:buttonbackground,color:buttontextcolor},children:[(0,jsx_runtime.jsxs)("span",{class:"swoosh-container",children:[(0,jsx_runtime.jsx)("span",{class:"star-start",children:(0,jsx_runtime.jsx)("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M4.23539 2.16758C4.31585 1.75612 4.83196 1.6292 5.09362 1.92958L6.64272 3.65653L8.92869 3.36308C9.33686 3.31475 9.62105 3.7548 9.41431 4.12022L8.26344 6.1095L9.24532 8.18833C9.41411 8.56311 9.07604 8.98116 8.67962 8.89652L6.43413 8.40043L4.74982 9.98635C4.45362 10.2631 3.94852 10.0788 3.90018 9.67067L3.67114 7.38306L1.6601 6.27065C1.29468 6.06391 1.31163 5.54034 1.6864 5.37155L3.81205 4.44154L4.23539 2.16758Z","fill-opacity":"0.5"})})}),(0,jsx_runtime.jsx)("span",{class:"swoosh",children:" "})]}),buttontext,buttonicon&&(0,jsx_runtime.jsx)("span",{class:"basket-icon",children:(0,jsx_runtime.jsx)("svg",{width:"22",height:"18",viewBox:"0 0 22 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M21.2401 7.57V8.14C21.2401 8.38 21.1601 8.58 20.9901 8.75C20.8201 8.92 20.6201 9 20.3801 9H20.0901L19.1601 15.57C19.0901 16 18.8901 16.35 18.5701 16.63C18.2501 16.9 17.8701 17.04 17.4401 17.04H4.36006C3.93006 17.04 3.55006 16.9 3.23006 16.63C2.91006 16.35 2.71006 16 2.64006 15.57L1.71006 9H1.42006C1.18006 9 0.980059 8.92 0.810059 8.75C0.640059 8.58 0.560059 8.38 0.560059 8.14V7.57C0.560059 7.33 0.640059 7.13 0.810059 6.96C0.980059 6.79 1.18006 6.71 1.42006 6.71H3.83006L7.67006 1.43C7.86006 1.17 8.11006 1.01 8.42006 0.960001C8.73006 0.910001 9.02006 0.980002 9.28006 1.18C9.54006 1.37 9.70006 1.62 9.75006 1.93C9.80006 2.24 9.73006 2.53 9.53006 2.79L6.66006 6.71H15.1401L12.2701 2.79C12.0801 2.53 12.0101 2.24 12.0501 1.93C12.1001 1.62 12.2501 1.37 12.5201 1.18C12.7801 0.990002 13.0701 0.920001 13.3801 0.960001C13.6901 1.01 13.9401 1.16 14.1301 1.43L17.9701 6.71H20.3801C20.6201 6.71 20.8201 6.79 20.9901 6.96C21.1601 7.13 21.2401 7.33 21.2401 7.57ZM7.73006 13.89V9.87C7.73006 9.63 7.65006 9.43 7.48006 9.26C7.31006 9.09 7.11006 9.01 6.87006 9.01C6.63006 9.01 6.43006 9.09 6.26006 9.26C6.09006 9.43 6.01006 9.63 6.01006 9.87V13.89C6.01006 14.13 6.09006 14.33 6.26006 14.5C6.43006 14.67 6.63006 14.75 6.87006 14.75C7.11006 14.75 7.31006 14.67 7.48006 14.5C7.65006 14.33 7.73006 14.13 7.73006 13.89ZM11.7501 13.89V9.87C11.7501 9.63 11.6701 9.43 11.5001 9.26C11.3301 9.09 11.1301 9.01 10.8901 9.01C10.6501 9.01 10.4501 9.09 10.2801 9.26C10.1101 9.43 10.0301 9.63 10.0301 9.87V13.89C10.0301 14.13 10.1101 14.33 10.2801 14.5C10.4501 14.67 10.6501 14.75 10.8901 14.75C11.1301 14.75 11.3301 14.67 11.5001 14.5C11.6701 14.33 11.7501 14.13 11.7501 13.89ZM15.7701 13.89V9.87C15.7701 9.63 15.6901 9.43 15.5201 9.26C15.3501 9.09 15.1501 9.01 14.9101 9.01C14.6701 9.01 14.4701 9.09 14.3001 9.26C14.1301 9.43 14.0501 9.63 14.0501 9.87V13.89C14.0501 14.13 14.1301 14.33 14.3001 14.5C14.4701 14.67 14.6701 14.75 14.9101 14.75C15.1501 14.75 15.3501 14.67 15.5201 14.5C15.6901 14.33 15.7701 14.13 15.7701 13.89Z"})})}),(0,jsx_runtime.jsx)("span",{class:"star-end",children:(0,jsx_runtime.jsx)("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{d:"M4.23539 2.16758C4.31585 1.75612 4.83196 1.6292 5.09362 1.92958L6.64272 3.65653L8.92869 3.36308C9.33686 3.31475 9.62105 3.7548 9.41431 4.12022L8.26344 6.1095L9.24532 8.18833C9.41411 8.56311 9.07604 8.98116 8.67962 8.89652L6.43413 8.40043L4.74982 9.98635C4.45362 10.2631 3.94852 10.0788 3.90018 9.67067L3.67114 7.38306L1.6601 6.27065C1.29468 6.06391 1.31163 5.54034 1.6864 5.37155L3.81205 4.44154L4.23539 2.16758Z","fill-opacity":"0.5"})})})]})})]})}),(0,jsx_runtime.jsxs)("div",{class:"carousel-right-panel",children:[(0,jsx_runtime.jsx)("div",{class:"slide active",children:(0,jsx_runtime.jsx)("div",{class:"slide-inner",children:(0,jsx_runtime.jsxs)("div",{class:"masonry",children:[(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"})]})})}),(0,jsx_runtime.jsx)("div",{class:"slide",children:(0,jsx_runtime.jsx)("div",{class:"slide-inner",children:(0,jsx_runtime.jsxs)("div",{class:"masonry",children:[(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"}),(0,jsx_runtime.jsx)("div",{class:"masonryItem tall loading"})]})})}),(0,jsx_runtime.jsx)("div",{className:"carousel-nav left-nav",style:{background:arrowsBackground,color:arrowsColor},children:"❮"}),(0,jsx_runtime.jsx)("div",{className:"carousel-nav right-nav",style:{background:arrowsBackground,color:arrowsColor},children:"❯"})]})]}),(0,jsx_runtime.jsx)("script",{children:'\n  class Carousel {\n    constructor(wrapper) {\n      this.wrapper = wrapper;\n      this.carousel = wrapper.querySelector(".carousel-right-panel");\n      this.leftPanel = wrapper.querySelector(".carousel-left-panel");\n      this.slides = wrapper.querySelectorAll(".slide");\n      this.leftNav = wrapper.querySelector(".left-nav");\n      this.rightNav = wrapper.querySelector(".right-nav");\n\n      this.index = 0;\n      this.animating = false;\n      this.isDragging = false;\n      this.startX = 0;\n      this.currentTranslate = 0;\n      this.animationID = null;\n      this.moved = false;\n      this.autoSlideInterval = null;\n      this.autoDirection = "next";\n\n      if (this.slides.length === 1) {\n        this.slides[0].classList.add("active");\n        this.slideIn(this.slides[0], this.autoDirection);\n        setTimeout(() => this.adjustHeight(), 50);\n        if (this.leftNav) this.leftNav.style.display = "none";\n        if (this.rightNav) this.rightNav.style.display = "none";\n        this.carousel.style.cursor = "default";\n      } else {\n        this.initEvents();\n        this.slides[0].classList.add("active");\n        this.slideIn(this.slides[0], this.autoDirection);\n        setTimeout(() => this.adjustHeight(), 50);\n      }\n\n      this.updateNavVisibility();\n    }\n\n    slideIn(slide, direction) {\n      direction = direction || "next";\n      const items = slide.querySelectorAll(".masonryItem");\n      items.forEach((box, i) => {\n        box.style.transition = "none";\n        box.style.transform =\n          direction === "next"\n            ? "translateX(150vw) scale(0.9)"\n            : "translateX(-150vw) scale(0.9)";\n        box.style.opacity = 0;\n        box.offsetHeight;\n        setTimeout(() => {\n          box.style.transition =\n            "transform 1s cubic-bezier(0.25,1.1,0.35,1), opacity 1s ease";\n          box.style.transform = "translateX(0) scale(1)";\n          box.style.opacity = 1;\n        }, i * 100);\n      });\n    }\n\n    slideOut(slide, direction) {\n      direction = direction || "next";\n      const items = slide.querySelectorAll(".masonryItem");\n      const total = items.length;\n      items.forEach((box, i) => {\n        const delay =\n          direction === "next" ? i * 70 : (total - 1 - i) * 70;\n        setTimeout(() => {\n          box.style.transition = "transform 0.8s ease, opacity 0.8s ease";\n          box.style.transform =\n            direction === "next"\n              ? "translateX(-150vw) scale(0.9)"\n              : "translateX(150vw) scale(0.9)";\n          box.style.opacity = 0;\n        }, delay);\n      });\n    }\n\n    adjustHeight() {\n      let maxH = 0;\n      this.slides.forEach((slide) => {\n        slide.style.opacity = 1;\n        slide.style.position = "relative";\n        const h = slide.scrollHeight;\n        if (h > maxH) maxH = h;\n        slide.style.opacity = "";\n        slide.style.position = "";\n      });\n\n      this.carousel.style.minHeight = maxH + 100 + "px";\n      this.leftPanel.style.height = maxH + 100 + "px";\n\n      if (document.documentElement.clientWidth > 900) {\n        this.carousel.style.minHeight = maxH + 40 + "px";\n        this.leftPanel.style.height = maxH + 40 + "px";\n      }\n    }\n\n    goTo(next, direction, userInitiated) {\n      if (this.animating || next === this.index) return;\n      this.animating = true;\n\n      if (!direction) {\n        direction = next > this.index ? "next" : "prev";\n      }\n      if (userInitiated) this.autoDirection = direction;\n\n      const oldSlide = this.slides[this.index];\n      const newSlide = this.slides[next];\n\n      newSlide.classList.add("active");\n      this.slideIn(newSlide, direction);\n      this.slideOut(oldSlide, direction);\n\n      setTimeout(() => {\n        oldSlide.classList.remove("active");\n        this.index = next;\n        this.adjustHeight();\n        this.animating = false;\n      }, 1200);\n\n      this.resetAutoSlide();\n    }\n\n    nextSlide() {\n      this.goTo((this.index + 1) % this.slides.length, "next");\n    }\n\n    prevSlide() {\n      this.goTo(\n        (this.index - 1 + this.slides.length) % this.slides.length,\n        "prev"\n      );\n    }\n\n    startAutoSlide() {\n      clearInterval(this.autoSlideInterval);\n      this.autoSlideInterval = setInterval(() => {\n        if (this.autoDirection === "next") {\n          this.nextSlide();\n        } else {\n          this.prevSlide();\n        }\n      }, 4000);\n    }\n\n    resetAutoSlide() {\n      this.startAutoSlide();\n    }\n\n    touchStart(e) {\n      if (this.animating) return;\n      this.isDragging = true;\n      this.startX = e.type.indexOf("mouse") !== -1 ? e.pageX : e.touches[0].clientX;\n      this.moved = false;\n      this.animationID = requestAnimationFrame(() => this.animation());\n      this.carousel.classList.add("dragging");\n    }\n\n    touchMove(e) {\n      if (!this.isDragging || this.animating) return;\n      const x = e.type.indexOf("mouse") !== -1 ? e.pageX : e.touches[0].clientX;\n      const delta = x - this.startX;\n      this.currentTranslate = delta;\n      if (Math.abs(delta) > 5) this.moved = true;\n\n      const inner = this.slides[this.index].querySelector(".slide-inner");\n      if (inner) {\n        inner.style.transform = "translateX(" + this.currentTranslate + "px)";\n      }\n    }\n\n    touchEnd() {\n      cancelAnimationFrame(this.animationID);\n      this.isDragging = false;\n      const movedX = this.currentTranslate;\n      this.carousel.classList.remove("dragging");\n\n      const inner = this.slides[this.index].querySelector(".slide-inner");\n      if (inner) inner.style.transition = "transform 0.3s ease";\n\n      if (movedX < -50) {\n        this.goTo((this.index + 1) % this.slides.length, "next", true);\n      } else if (movedX > 50) {\n        this.goTo(\n          (this.index - 1 + this.slides.length) % this.slides.length,\n          "prev",\n          true\n        );\n      } else if (inner) {\n        inner.style.transform = "translateX(0)";\n        setTimeout(() => {\n          inner.style.transition = "";\n          inner.style.transform = "";\n        }, 300);\n      }\n\n      this.currentTranslate = 0;\n    }\n\n    animation() {\n      this.setSliderPosition();\n      if (this.isDragging) {\n        requestAnimationFrame(() => this.animation());\n      }\n    }\n\n    setSliderPosition() {\n      const inner = this.slides[this.index].querySelector(".slide-inner");\n      if (inner) {\n        inner.style.transform = "translateX(" + this.currentTranslate + "px)";\n      }\n    }\n\n    initEvents() {\n      this.carousel.addEventListener("mousedown", (e) => this.touchStart(e));\n      this.carousel.addEventListener("mousemove", (e) => this.touchMove(e));\n      this.carousel.addEventListener("mouseup", () => this.touchEnd());\n      this.carousel.addEventListener("mouseleave", () => {\n        if (this.isDragging) this.touchEnd();\n      });\n\n      this.carousel.addEventListener("touchstart", (e) => this.touchStart(e));\n      this.carousel.addEventListener(\n        "touchmove",\n        (e) => this.touchMove(e),\n        { passive: false }\n      );\n      this.carousel.addEventListener("touchend", () => this.touchEnd());\n\n      this.carousel.addEventListener(\n        "click",\n        (e) => {\n          if (this.moved) {\n            e.preventDefault();\n            e.stopPropagation();\n          }\n        },\n        true\n      );\n\n      if (this.leftNav) {\n        this.leftNav.addEventListener("click", () => {\n          this.goTo(\n            (this.index - 1 + this.slides.length) % this.slides.length,\n            "next",\n            true\n          );\n        });\n      }\n\n      if (this.rightNav) {\n        this.rightNav.addEventListener("click", () => {\n          this.goTo(\n            (this.index + 1) % this.slides.length,\n            "prev",\n            true\n          );\n        });\n      }\n\n      window.addEventListener("resize", () => {\n        setTimeout(() => this.adjustHeight(), 100);\n      });\n    }\n\n    updateNavVisibility() {\n  if (!this.leftNav || !this.rightNav) return;\n\n  if (this.slides.length > 1) {\n    this.leftNav.style.display = "";\n    this.rightNav.style.display = "";\n    this.carousel.style.cursor = "grab";\n  } else {\n    this.leftNav.style.display = "none";\n    this.rightNav.style.display = "none";\n    this.carousel.style.cursor = "default";\n  }\n}\n  }\n\n  (function normalizeInitialShimmers() {\n  const wrapper = document.querySelector(".carousel-wrapper-component");\n  if (!wrapper) return;\n\n  const carousel = wrapper.querySelector(".carousel-right-panel");\n  const slides = Array.from(carousel.querySelectorAll(".slide"));\n\n  const isMobile = window.innerWidth <= 767;\n  const itemsPerSlide = '.concat(itemsPerSlide,';\n\n  slides.forEach((slide, index) => {\n    // keep only ONE slide initially\n    if (index > 0) {\n      slide.remove();\n      return;\n    }\n\n    const masonry = slide.querySelector(".masonry");\n    const items = masonry.querySelectorAll(".masonryItem");\n\n    items.forEach((item, i) => {\n      if (i >= itemsPerSlide) item.remove();\n    });\n  });\n})();\n\n\n  document.addEventListener("DOMContentLoaded", () => {\n    document\n      .querySelectorAll(".carousel-wrapper-component")\n      .forEach((wrapper) => {\n        wrapper.carouselInstance = new Carousel(wrapper);\n      });\n\n    document\n      .querySelectorAll(".masonryItem")\n      .forEach((i) => i.classList.add("loading"));\n\n    loadFromIframe();\n  });\n\n  function loadFromIframe() {\n  const iframe = document.createElement("iframe");\n  iframe.src = "').concat(categoryurl,'";\n  iframe.style.display = "none";\n  document.body.appendChild(iframe);\n\n  const fastScan = setInterval(() => {\n    const doc = iframe.contentDocument;\n    if (!doc) return;\n\n    const items = doc.querySelectorAll(\n      ".product__listing.product__grid .product-item"\n    );\n\n    // CONFIG -------------------------\n    const isMobile = window.innerWidth <= 767;\n    const itemsPerSlide = ').concat(itemsPerSlide,";\n    const maxItems = ").concat(maxItems,';\n    // --------------------------------\n\n    if (items.length < maxItems) return;\n    clearInterval(fastScan);\n\n    const selectedItems = Array.from(items).slice(0, maxItems);\n    const neededSlides = Math.ceil(selectedItems.length / itemsPerSlide);\n\n    const carousel = document.querySelector(".carousel-right-panel");\n    let slides = Array.from(carousel.querySelectorAll(".slide"));\n\n    const slideTemplate = slides[0];\n\n    // ADD slides if needed\n    while (slides.length < neededSlides) {\n      const clone = slideTemplate.cloneNode(true);\n      clone.classList.remove("active");\n      clone.querySelector(".masonry").innerHTML = "";\n      carousel.insertBefore(\n        clone,\n        carousel.querySelector(".carousel-nav.left-nav")\n      );\n      slides.push(clone);\n    }\n\n    // REMOVE extra slides\n    while (slides.length > neededSlides) {\n      slides.pop().remove();\n    }\n\n    slides = Array.from(carousel.querySelectorAll(".slide"));\n\n    function wrapProduct(node) {\n      const wrapper = document.createElement("div");\n      wrapper.className = "masonryItem tall product";\n      wrapper.appendChild(node.cloneNode(true));\n\n      const features = wrapper.querySelector(".product__grid__features");\n      if (features) features.remove();\n\n      return wrapper;\n    }\n\n    slides.forEach((slide, index) => {\n      const masonry = slide.querySelector(".masonry");\n      masonry.innerHTML = "";\n\n      const start = index * itemsPerSlide;\n      const end = start + itemsPerSlide;\n      const slideItems = selectedItems.slice(start, end);\n\n      slideItems.forEach(item =>\n        masonry.appendChild(wrapProduct(item))\n      );\n    });\n\n    // Details link logic (unchanged)\n    document\n      .querySelectorAll(".masonryItem .product-item")\n      .forEach((item) => {\n        const imageLink = item.querySelector("a[href]");\n        const price = item.querySelector(".grid-pricing");\n        if (!imageLink || !price) return;\n        if (item.querySelector(".details-link")) return;\n\n        const detailsLink = document.createElement("a");\n        detailsLink.href = imageLink.href;\n        detailsLink.textContent = "Details";\n        detailsLink.className = "details-link";\n        price.after(detailsLink);\n      });\n\n    document\n      .querySelectorAll(".masonryItem")\n      .forEach(m => m.classList.remove("loading"));\n\n    // Re-sync carousel\n    // HARD RESET carousel so it knows about new slides\nconst wrapper = carousel.closest(".carousel-wrapper-component");\nconst oldInst = wrapper.carouselInstance;\n\nif (oldInst) {\n  // stop timers + detach logic\n  clearInterval(oldInst.autoSlideInterval);\n  wrapper.carouselInstance = null;\n}\n\n// Force clean active state\ncarousel.querySelectorAll(".slide").forEach((s, i) => {\n  s.classList.toggle("active", i === 0);\n});\n\n// Recreate carousel instance (CRITICAL)\nwrapper.carouselInstance = new Carousel(wrapper);\nwrapper.carouselInstance.startAutoSlide();\n\n\n    iframe.remove();\n  }, 50);\n}\n\n  ')})]})};MulticlickCarouselProductFeed.__docgenInfo={description:"Primary UI component for user interaction",methods:[],displayName:"MulticlickCarouselProductFeed",props:{itemsPerSlide:{defaultValue:{value:"6",computed:!1},description:"",type:{name:"number"},required:!1},itemsPerRow:{defaultValue:{value:"3",computed:!1},description:"",type:{name:"number"},required:!1},itemsPerRowMobile:{defaultValue:{value:"2",computed:!1},description:"",type:{name:"number"},required:!1},categoryurl:{description:"",type:{name:"string"},required:!1},maxItems:{description:"",type:{name:"number"},required:!1},background:{description:"",type:{name:"string"},required:!1},titlecolor:{description:"",type:{name:"string"},required:!1},textcolor:{description:"",type:{name:"string"},required:!1},buttonbackground:{description:"",type:{name:"string"},required:!1},buttontextcolor:{description:"",type:{name:"string"},required:!1},buttonicon:{description:"",type:{name:"bool"},required:!1},arrowsBackground:{description:"",type:{name:"string"},required:!1},arrowsColor:{description:"",type:{name:"string"},required:!1},title:{description:"",type:{name:"string"},required:!1},blurb:{description:"",type:{name:"string"},required:!1},buttontext:{description:"",type:{name:"string"},required:!1},link:{description:"",type:{name:"string"},required:!1},logo:{description:"",type:{name:"string"},required:!1},logoalt:{description:"",type:{name:"string"},required:!1},dataElementType:{description:"",type:{name:"string"},required:!1},datapromotionindex:{description:"",type:{name:"string"},required:!1},datapromotionname:{description:"",type:{name:"string"},required:!1}}};var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/preview-api");const _excluded=["user"],Multiclickcarouselproducts_stories={title:"Components/Multiclick Carousel Product Feed",component:MulticlickCarouselProductFeed,parameters:{layout:"fullscreen"},argTypes:{user:{options:["stories","hasina","shermin","sam"],control:{type:"select"}}}},MulticlickCarouselProducts={args:{user:"stories",categoryurl:"",maxItems:12,itemsPerSlide:6,itemsPerRow:3,itemsPerRowMobile:2,background:"",titlecolor:"",textcolor:"",buttonbackground:"",buttontextcolor:"",buttonicon:!0,arrowsBackground:"",arrowsColor:"",title:"",blurb:"",buttontext:"",link:"",logo:"",logoalt:"",dataElementType:"",datapromotionindex:"",datapromotionname:""},render:function Render(args){const[currentArgs,updateArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),isLoadingRef=(0,react.useRef)(!1),lastUserRef=(0,react.useRef)(args.user),lastSyncedData=(0,react.useRef)({});return(0,react.useEffect)((()=>{(async()=>{isLoadingRef.current=!0,lastUserRef.current=args.user;try{const docRef=(0,index_esm.H9)(firebase.db,args.user,"multiclickcarouselproductfeed"),snap=await(0,index_esm.x7)(docRef);if(snap.exists()){const firestoreData=snap.data();lastSyncedData.current=firestoreData,updateArgs((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)({},currentArgs),firestoreData),{},{user:args.user}))}}catch(e){console.error("Firestore load error:",e)}isLoadingRef.current=!1})()}),[args.user]),(0,react.useEffect)((()=>{if(isLoadingRef.current)return;const selectedUser=lastUserRef.current;if(currentArgs.user!==selectedUser)return;const{user}=currentArgs,fields=(0,objectWithoutProperties.A)(currentArgs,_excluded),prevFields=lastSyncedData.current;if(!Object.entries(fields).some((_ref=>{let[k,v]=_ref;return prevFields[k]!==v})))return;lastSyncedData.current=fields;(async()=>{try{const docRef=(0,index_esm.H9)(firebase.db,selectedUser,"multiclickcarouselproductfeed");await(0,index_esm.mZ)(docRef,fields),console.log("UPDATED:",selectedUser,fields)}catch(e){console.error("Firestore update error:",e)}})()}),[currentArgs]),(0,jsx_runtime.jsx)(MulticlickCarouselProductFeed,(0,objectSpread2.A)({},args))}},__namedExportsOrder=["MulticlickCarouselProducts"];MulticlickCarouselProducts.parameters={...MulticlickCarouselProducts.parameters,docs:{...MulticlickCarouselProducts.parameters?.docs,source:{originalSource:"{\n  args: {\n    user: 'stories',\n    categoryurl: '',\n    maxItems: 12,\n    itemsPerSlide: 6,\n    itemsPerRow: 3,\n    itemsPerRowMobile: 2,\n    background: '',\n    titlecolor: '',\n    textcolor: '',\n    buttonbackground: '',\n    buttontextcolor: '',\n    buttonicon: true,\n    arrowsBackground: '',\n    arrowsColor: '',\n    title: '',\n    blurb: '',\n    buttontext: '',\n    link: '',\n    logo: '',\n    logoalt: '',\n    dataElementType: '',\n    datapromotionindex: '',\n    datapromotionname: ''\n  },\n  render: function Render(args) {\n    const [currentArgs, updateArgs] = useArgs();\n    const isLoadingRef = useRef(false); // prevents writing during load\n    const lastUserRef = useRef(args.user); // track selected user\n    const lastSyncedData = useRef({}); // prevent write loops\n\n    // -------------------------------------------------------\n    // 1. LOAD DATA FROM SELECTED USER\n    // -------------------------------------------------------\n    useEffect(() => {\n      const load = async () => {\n        isLoadingRef.current = true; // BLOCK updates\n        lastUserRef.current = args.user;\n        try {\n          const docRef = doc(db, args.user, \"multiclickcarouselproductfeed\");\n          const snap = await getDoc(docRef);\n          if (snap.exists()) {\n            const firestoreData = snap.data();\n            lastSyncedData.current = firestoreData;\n\n            // Replace storybook args with loaded data\n            updateArgs({\n              ...currentArgs,\n              ...firestoreData,\n              user: args.user\n            });\n          }\n        } catch (e) {\n          console.error(\"Firestore load error:\", e);\n        }\n        isLoadingRef.current = false; // allow updates again\n      };\n      load();\n    }, [args.user]);\n\n    // -------------------------------------------------------\n    // 2. SYNC ONLY FIELD CHANGES (NOT USER CHANGE)\n    // -------------------------------------------------------\n    useEffect(() => {\n      if (isLoadingRef.current) return; // Don't sync during load\n\n      const selectedUser = lastUserRef.current;\n\n      // Don't sync if this change is caused by selecting a new user\n      if (currentArgs.user !== selectedUser) return;\n\n      // Remove user field before writing\n      const {\n        user,\n        ...fields\n      } = currentArgs;\n\n      // Prevent re-writing unchanged data\n      const prevFields = lastSyncedData.current;\n      const changed = Object.entries(fields).some(([k, v]) => prevFields[k] !== v);\n      if (!changed) return;\n      lastSyncedData.current = fields;\n      const send = async () => {\n        try {\n          const docRef = doc(db, selectedUser, \"multiclickcarouselproductfeed\");\n          await updateDoc(docRef, fields);\n          console.log(\"UPDATED:\", selectedUser, fields);\n        } catch (e) {\n          console.error(\"Firestore update error:\", e);\n        }\n      };\n      send();\n    }, [currentArgs]);\n    return <MulticlickCarouselProductFeed {...args} />;\n  }\n}",...MulticlickCarouselProducts.parameters?.docs?.source}}}}}]);