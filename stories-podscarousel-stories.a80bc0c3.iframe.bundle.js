"use strict";(self.webpackChunkentertainer_redesign=self.webpackChunkentertainer_redesign||[]).push([[5],{"./src/config/firebase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{db:()=>db});var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/firebase/app/dist/esm/index.esm.js"),firebase_firestore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js");const app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.Wp)({apiKey:"AIzaSyDLmVO4qOiYb8dTm9tIUSUyZZXliuddo1c",authDomain:"storybook-58efc.firebaseapp.com",projectId:"storybook-58efc",storageBucket:"storybook-58efc.firebasestorage.app",messagingSenderId:"10714570266",appId:"1:10714570266:web:1086b72b26588d72193ba3"}),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.aU)(app)},"./src/stories/podscarousel.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{HomeCarouselPods:()=>HomeCarouselPods,__namedExportsOrder:()=>__namedExportsOrder,default:()=>podscarousel_stories});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),firebase=__webpack_require__("./src/config/firebase.js"),index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const PodsCarousel=_ref=>{let{podscarouselfirstslide,podscarouselsecondslide,podscarouselthirdslide,podscarouselfourthslide,podscarouselfifthslide,podscarouselsixthslide,podscarouselsevthslide,podscarouseleighthslide,podscarouselninethslide,podscarouseltenthslide}=_ref;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:'\n\t\t#storybook-root .offer-pods .carousel-cell {\n\t\twidth:100%\n\t}\n  .offer-pods {\n    padding: 0 10px 20px;\n    background-color: #dbe3ff;\n  }\n\n  .offer-pods .carousel {\n    padding: 0 20px;\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n\n  .offer-pods .carousel .item {\n    padding: 0;\n  }\n\n  .offer-pods .carousel-cell {\n    width: 78%;\n    padding-top: 10px;\n\t\taspect-ratio: 241/381;\n  }\n\n  .offer-pods img {\n    width: 100%;\n    margin: 0 0 10px !important;\n  }\n\n  .offer-pods a {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n    text-align: center;\n    border-radius: 8px;\n    padding: 0 0 20px;\n    background-color: #fff;\n    color: #00548b;\n    text-decoration: none;\n    font-size: 18px;\n    font-family: "Nunito Bold", "Tahoma Bold", sans-serif;\n    font-weight: bold;\n    color: #00548b;\n    margin: 0 20px 0 0;\n    box-shadow: 0 0 5px rgba(3, 33, 33, 0.05);\n    letter-spacing: 0.5px;\n    transition: all 0.3s;\n    overflow: hidden;\n    height: 100%;\n  }\n\n  .offer-pods a:hover {\n    box-shadow: 0 0 18px rgba(33, 33, 33, 0.15);\n    transform: translateY(-5px);\n  }\n\n  .offer-pods a .pod-image-container + span {\n    margin: 20px;\n  }\n\n  .offer-pods .flickity-button,\n  .offer-pods .flickity-page-dots {\n    display: none;\n  }\n\n  .offer-pods .flickity-viewport {\n    --mask: linear-gradient(to right, rgba(0, 0, 0, 1) 0, rgba(0, 0, 0, 1) 92%, rgba(0, 0, 0, 0) 100%, rgba(0, 0, 0, 0) 0) 100% 98% / 100% 100% repeat-x;\n    mask: var(--mask);\n  }\n\n  @media (min-width: 768px) {\n    .offer-pods .carousel {\n      padding: 0 10px;\n    }\n    .offer-pods .carousel-cell {\n      width: 37%;\n\t\t\taspect-ratio: 429/600;\n    }\n\n    .offer-pods a {\n      font-size: 20px;\n    }\n  }\n\n  @media (min-width: 1024px) {\n    .offer-pods a {\n      font-size: 22px;\n    }\n  }\n\n  .offer-pods .hero-button {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50px;\n        margin-bottom: 30px;\n        background-color: #009E44;\n        color: #fff;\n        font-size: 16px;\n        font-weight: bold;\n        text-decoration: none;\n        padding: 10px 10px 10px 0px;\n        height: 40px;\n        box-shadow: 0 0 5px rgba(3,33,33,.6);\n        border: 3px solid #ffffff;\n        transition: all 0.3s;\n    }\n\n    .offer-pods .hero-button:hover {\n        background-color: #AFCB17;\n        scale: 1.05;\n        box-shadow: 0 0 18px rgba(3,33,33,.3);\n        color: #fff;\n    }\n\n    .offer-pods .hero-button .basket-icon {\n        transition: all 0.3s;\n        transform: rotate(15deg);\n        margin-left: 5px;\n    }\n\n    .offer-pods .hero-button:hover .basket-icon {\n        transform: rotate(-10deg)\n    }\n\n    .offer-pods .hero-button .star-start {\n        position: relative;\n        top: -3px;\n    }\n\n    .offer-pods .hero-button .swoosh-container {\n        display: flex;\n        align-items: center;\n        justify-content: end;\n        margin-right: 5px;\n        width: 25px;\n    }\n\n    .offer-pods .hero-button .swoosh {\n        display: block;\n        width: 0;\n        height: 3px;\n        margin-top: 15px;\n        margin-left: -2px;\n        transform: rotate(15deg);\n        background-color: rgba(255, 255, 255, 0.7);\n        transition: all 0.3s;\n    }\n\n    .offer-pods .hero-button:hover .swoosh {\n        width: 7px;\n    }\n\n    .offer-pods .hero-button .star-end {\n        position: relative;\n        bottom: -5px;\n        transition: all 0.3s;\n    }\n\n    .offer-pods .hero-button:hover .star-end {\n        scale: 1.1;\n        transform: rotate(30deg);\n    }\n\n\t\t.pod-image-container {\n        position: relative;\n\t\t\t\twidth: 100%;\n    }\n\n    .pod .logo {\n        position: absolute;\n        top: 10px;\n        left: 0;\n        width: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .pod .logo.left {\n      justify-content: flex-start;\n      padding-left: 10px;\n    }\n\n    .pod .logo.right {\n      justify-content: flex-end;\n      padding-right: 10px;\n    }\n\n    .pod .logo img {\n      width: auto;\n    }\n\n\t\t.pod.has-tagline .hero-button {\n        margin-top: 20px;\n    }\n\n\t\t.pod.has-tagline img {\n\t\t\tmargin: 0 0 20px !important;\n\t\t}\n\n    .pod.has-tagline .pod-image-container + span {\n      margin: 0 20px;\n    }\n'}),(0,jsx_runtime.jsx)("div",{class:"offer-pods",children:(0,jsx_runtime.jsxs)("div",{class:"carousel offer-pods-carousel js-flickity flickity-enabled is-draggable","data-flickity":'{ "autoPlay": true, "wrapAround": true, "cellAlign": "left" }',children:[(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselfirstslide}}),podscarouselsecondslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselsecondslide}}),podscarouselthirdslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselthirdslide}}),podscarouselfourthslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselfourthslide}}),podscarouselfifthslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselfifthslide}}),podscarouselsixthslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselsixthslide}}),podscarouselsevthslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselsevthslide}}),podscarouseleighthslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouseleighthslide}}),podscarouselninethslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouselninethslide}}),podscarouseltenthslide&&(0,jsx_runtime.jsx)("div",{class:"carousel-cell",dangerouslySetInnerHTML:{__html:podscarouseltenthslide}})]})}),(0,jsx_runtime.jsx)("script",{children:'\n  document.addEventListener(\'DOMContentLoaded\', function() {\n    setTimeout(function(){\n\n      const FLICKITIES = document.querySelectorAll(".offer-pods-carousel");\n\n      FLICKITIES.forEach((slider) => {\n        new Flickity(slider);\n      });\n\n      var flkty4 = new Flickity(".offer-pods-carousel");\n\n      flkty4.resize();\n\n      const offerPods = document.querySelectorAll(\'.offer-pods-carousel .carousel-cell\');\n\n      offerPods.forEach((slide) => {\n        slide.style.height = "100%";\n      })\n    }, 1000);\n  }, false);\n  '})]})};PodsCarousel.__docgenInfo={description:"Primary UI component for user interaction",methods:[],displayName:"PodsCarousel",props:{podscarouselfirstslide:{description:"Button contents",type:{name:"string"},required:!0},podscarouselsecondslide:{description:"",type:{name:"string"},required:!1},podscarouselthirdslide:{description:"",type:{name:"string"},required:!1},podscarouselfourthslide:{description:"",type:{name:"string"},required:!1},podscarouselfifthslide:{description:"",type:{name:"string"},required:!1},podscarouselsixthslide:{description:"",type:{name:"string"},required:!1},podscarouselsevthslide:{description:"",type:{name:"string"},required:!1},podscarouseleighthslide:{description:"",type:{name:"string"},required:!1},podscarouselninethslide:{description:"",type:{name:"string"},required:!1},podscarouseltenthslide:{description:"",type:{name:"string"},required:!1}}};var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/preview-api");const _excluded=["user"],podscarousel_stories={title:"Home/Pods/Final Pods Carousel",component:PodsCarousel,parameters:{layout:"centered"},argTypes:{user:{options:["stories","hasina","shermin","sam"],control:{type:"select"}}}},HomeCarouselPods={args:{user:"stories",podscarouselfirstslide:"",podscarouselsecondslide:"",podscarouselthirdslide:"",podscarouselfourthslide:"",podscarouselfifthslide:"",podscarouselsixthslide:"",podscarouselsevthslide:"",podscarouseleighthslide:"",podscarouselninethslide:"",podscarouseltenthslide:""},render:function Render(args){const[currentArgs,updateArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),isLoadingRef=(0,react.useRef)(!1),lastUserRef=(0,react.useRef)(args.user),lastSyncedData=(0,react.useRef)({});return(0,react.useEffect)((()=>{(async()=>{isLoadingRef.current=!0,lastUserRef.current=args.user;try{const docRef=(0,index_esm.H9)(firebase.db,args.user,"podscarousel"),snap=await(0,index_esm.x7)(docRef);if(snap.exists()){const firestoreData=snap.data();lastSyncedData.current=firestoreData,updateArgs((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)({},currentArgs),firestoreData),{},{user:args.user}))}}catch(e){console.error("Firestore load error:",e)}isLoadingRef.current=!1})()}),[args.user]),(0,react.useEffect)((()=>{if(isLoadingRef.current)return;const selectedUser=lastUserRef.current;if(currentArgs.user!==selectedUser)return;const{user}=currentArgs,fields=(0,objectWithoutProperties.A)(currentArgs,_excluded),prevFields=lastSyncedData.current;if(!Object.entries(fields).some((_ref=>{let[k,v]=_ref;return prevFields[k]!==v})))return;lastSyncedData.current=fields;(async()=>{try{const docRef=(0,index_esm.H9)(firebase.db,selectedUser,"podscarousel");await(0,index_esm.mZ)(docRef,fields),console.log("UPDATED:",selectedUser,fields)}catch(e){console.error("Firestore update error:",e)}})()}),[currentArgs]),(0,jsx_runtime.jsx)(PodsCarousel,(0,objectSpread2.A)({},args))}},__namedExportsOrder=["HomeCarouselPods"];HomeCarouselPods.parameters={...HomeCarouselPods.parameters,docs:{...HomeCarouselPods.parameters?.docs,source:{originalSource:"{\n  args: {\n    user: 'stories',\n    podscarouselfirstslide: '',\n    podscarouselsecondslide: '',\n    podscarouselthirdslide: '',\n    podscarouselfourthslide: '',\n    podscarouselfifthslide: '',\n    podscarouselsixthslide: '',\n    podscarouselsevthslide: '',\n    podscarouseleighthslide: '',\n    podscarouselninethslide: '',\n    podscarouseltenthslide: ''\n  },\n  render: function Render(args) {\n    const [currentArgs, updateArgs] = useArgs();\n    const isLoadingRef = useRef(false); // prevents writing during load\n    const lastUserRef = useRef(args.user); // track selected user\n    const lastSyncedData = useRef({}); // prevent write loops\n\n    // -------------------------------------------------------\n    // 1. LOAD DATA FROM SELECTED USER\n    // -------------------------------------------------------\n    useEffect(() => {\n      const load = async () => {\n        isLoadingRef.current = true; // BLOCK updates\n        lastUserRef.current = args.user;\n        try {\n          const docRef = doc(db, args.user, \"podscarousel\");\n          const snap = await getDoc(docRef);\n          if (snap.exists()) {\n            const firestoreData = snap.data();\n            lastSyncedData.current = firestoreData;\n\n            // Replace storybook args with loaded data\n            updateArgs({\n              ...currentArgs,\n              ...firestoreData,\n              user: args.user\n            });\n          }\n        } catch (e) {\n          console.error(\"Firestore load error:\", e);\n        }\n        isLoadingRef.current = false; // allow updates again\n      };\n      load();\n    }, [args.user]);\n\n    // -------------------------------------------------------\n    // 2. SYNC ONLY FIELD CHANGES (NOT USER CHANGE)\n    // -------------------------------------------------------\n    useEffect(() => {\n      if (isLoadingRef.current) return; // Don't sync during load\n\n      const selectedUser = lastUserRef.current;\n\n      // Don't sync if this change is caused by selecting a new user\n      if (currentArgs.user !== selectedUser) return;\n\n      // Remove user field before writing\n      const {\n        user,\n        ...fields\n      } = currentArgs;\n\n      // Prevent re-writing unchanged data\n      const prevFields = lastSyncedData.current;\n      const changed = Object.entries(fields).some(([k, v]) => prevFields[k] !== v);\n      if (!changed) return;\n      lastSyncedData.current = fields;\n      const send = async () => {\n        try {\n          const docRef = doc(db, selectedUser, \"podscarousel\");\n          await updateDoc(docRef, fields);\n          console.log(\"UPDATED:\", selectedUser, fields);\n        } catch (e) {\n          console.error(\"Firestore update error:\", e);\n        }\n      };\n      send();\n    }, [currentArgs]);\n    return <PodsCarousel {...args} />;\n  }\n}",...HomeCarouselPods.parameters?.docs?.source}}}}}]);