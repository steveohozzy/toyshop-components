"use strict";(self.webpackChunkentertainer_redesign=self.webpackChunkentertainer_redesign||[]).push([[687],{"./src/config/firebase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{db:()=>db});var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/firebase/app/dist/esm/index.esm.js"),firebase_firestore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js");const app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.Wp)({apiKey:"AIzaSyDLmVO4qOiYb8dTm9tIUSUyZZXliuddo1c",authDomain:"storybook-58efc.firebaseapp.com",projectId:"storybook-58efc",storageBucket:"storybook-58efc.firebasestorage.app",messagingSenderId:"10714570266",appId:"1:10714570266:web:1086b72b26588d72193ba3"}),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.aU)(app)},"./src/stories/Heropods.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{HeroPodsContianer:()=>HeroPodsContianer,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Heropods_stories});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),firebase=__webpack_require__("./src/config/firebase.js"),index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const HeroPods=_ref=>{let{textcolor,backgroundcolor,bordercolor,buttoncolor,buttonbackgroundcolor,buttonhovercolor,buttonhoverbackcolor,pod1image,pod1alt,pod1title,pod1text,pod1buttontext,pod1link,pod1dataelementtype,pod1datapromotionindex,pod1datapromotionname,pod2image,pod2alt,pod2title,pod2text,pod2buttontext,pod2link,pod2dataelementtype,pod2datapromotionindex,pod2datapromotionname}=_ref;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:"\n\t\n\t.hp-half-hero-modules {\n\t\tmargin: 0;\n\t\tpadding: 0 20px 20px;\n\t}\n\t\n\t\t.hp-half-hero-modules ul {\n\t\t\tdisplay: flex;\n    \t\tflex-wrap: wrap;\n    \t\tjustify-content: space-between;\n\t\t\tmargin: 0 auto;\n\t\t\tpadding: 0;\n\t\t\tlist-style: none;\n\t\t\tmax-width: 1400px;\n\t\t}\n\t\n\t\t\t.hp-half-hero-modules li {\n\t\t\t\tmargin: 20px 0 0;\n\t\t\t\tborder: solid 8px ".concat(bordercolor,";\n\t\t\t\tbackground: ").concat(backgroundcolor,";\n\t\t\t}\n\t\n\t\t\t\t.hp-half-hero-modules li a {\n\t\t\t\t\tcolor: ").concat(textcolor,";\n\t\t\t\t}\n\t\n\t\t\t\t\t.hp-half-hero-modules .half-hero-module-image {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t\t.hp-half-hero-modules .half-hero-module-image img {\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t.hp-half-hero-modules .half-hero-module-image iframe {\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 44vw;\n\t\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t.hp-half-hero-modules .half-hero-module-copy {\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\tpadding: 20px;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t\t.hp-half-hero-modules h3 {\n\t\t\t\t\t\t\tmargin: 0 0 10px;\n    \t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\t\tfont-size: 26px;\n\t\t\t\t\t\t\tline-height: 100%;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\tletter-spacing: 0;\n\t\t\t\t\t\t\ttext-transform: none;\n\t\t\t\t\t\t\tcolor: ").concat(textcolor,";\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t.hp-half-hero-modules p {\n\t\t\t\t\t\t\tmargin: 0 0 15px;\n\t\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tline-height: 140%;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t.hp-half-hero-modules .call-to-action {\n\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t\tpadding: 10px 30px;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tline-height: 100%;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\tcolor: ").concat(buttoncolor,";\n\t\t\t\t\t\t\tbackground: ").concat(buttonbackgroundcolor,";\n\t\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\t\ttransition: background-color 0.5s;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t.hp-half-hero-modules li:hover .call-to-action {\n\t\t\t\t\t\t\t\tcolor: ").concat(buttonhovercolor,";\n\t\t\t\t\t\t\t\tbackground-color: ").concat(buttonhoverbackcolor,"\n\t\t\t\t\t\t\t}\n\t\n\t\n\t@media (min-width: 768px) {\n\t\t\n\t\t.hp-half-hero-modules {\n\t\t\tpadding: 40px;\n\t\t}\n\t\t\n\t\t\t.hp-half-hero-modules li {\n\t\t\t\tmargin: 0;\n\t\t\t\twidth: calc(100% / 2 - 20px);\n\t\t\t}\n\t\t\n\t\t\t\t.hp-half-hero-modules .half-hero-module-image iframe {\n\t\t\t\t\theight: 22vw;\n\t\t\t\t}\n\t\n\t}\n\t\n\t\n\t@media (min-width: 1024px) {\n\t\t\n\t\t.hp-half-hero-modules .half-hero-module-image iframe {\n\t\t\theight: 240px;\n\t\t}\n\t\n\t}\n\t\n\t\n\t@media (min-width: 1400px) {\n\t\t\n\t\t.hp-half-hero-modules .half-hero-module-copy {\n\t\t\tpadding: 30px;\n\t\t}\n\t\n\t}\n\n    ")}),(0,jsx_runtime.jsx)("div",{class:"hp-half-hero-modules",children:(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsxs)("a",{href:pod1link,title:pod1alt,"data-element-type":pod1dataelementtype,"data-promotion-index":pod1datapromotionindex,"data-promotion-name":pod1datapromotionname,children:[(0,jsx_runtime.jsx)("div",{class:"half-hero-module-image",children:(0,jsx_runtime.jsx)("img",{src:pod1image,alt:pod1alt,title:pod1alt})}),(0,jsx_runtime.jsxs)("div",{class:"half-hero-module-copy",children:[(0,jsx_runtime.jsx)("h3",{children:pod1title}),(0,jsx_runtime.jsx)("p",{children:pod1text}),(0,jsx_runtime.jsx)("span",{class:"call-to-action",children:pod1buttontext})]})]})}),(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsxs)("a",{href:pod2link,title:pod2alt,"data-element-type":pod2dataelementtype,"data-promotion-index":pod2datapromotionindex,"data-promotion-name":pod2datapromotionname,children:[(0,jsx_runtime.jsx)("div",{class:"half-hero-module-image",children:(0,jsx_runtime.jsx)("img",{src:pod2image,alt:pod2alt,title:pod2alt})}),(0,jsx_runtime.jsxs)("div",{class:"half-hero-module-copy",children:[(0,jsx_runtime.jsx)("h3",{children:pod2title}),(0,jsx_runtime.jsx)("p",{children:pod2text}),(0,jsx_runtime.jsx)("span",{class:"call-to-action",children:pod2buttontext})]})]})})]})})]})};HeroPods.__docgenInfo={description:"Primary UI component for user interaction",methods:[],displayName:"HeroPods",props:{textcolor:{description:"Hero Pod contents",type:{name:"string"},required:!1},backgroundcolor:{description:"",type:{name:"string"},required:!1},bordercolor:{description:"",type:{name:"string"},required:!1},buttoncolor:{description:"",type:{name:"string"},required:!1},buttonbackgroundcolor:{description:"",type:{name:"string"},required:!1},buttonhovercolor:{description:"",type:{name:"string"},required:!1},buttonhoverbackcolor:{description:"",type:{name:"string"},required:!1},pod1image:{description:"",type:{name:"string"},required:!1},pod1alt:{description:"",type:{name:"string"},required:!1},pod1title:{description:"",type:{name:"string"},required:!1},pod1text:{description:"",type:{name:"string"},required:!1},pod1buttontext:{description:"",type:{name:"string"},required:!1},pod1link:{description:"",type:{name:"string"},required:!1},pod1dataelementtype:{description:"",type:{name:"string"},required:!1},pod1datapromotionindex:{description:"",type:{name:"string"},required:!1},pod1datapromotionname:{description:"",type:{name:"string"},required:!1},pod2image:{description:"",type:{name:"string"},required:!1},pod2alt:{description:"",type:{name:"string"},required:!1},pod2title:{description:"",type:{name:"string"},required:!1},pod2text:{description:"",type:{name:"string"},required:!1},pod2buttontext:{description:"",type:{name:"string"},required:!1},pod2link:{description:"",type:{name:"string"},required:!1},pod2dataelementtype:{description:"",type:{name:"string"},required:!1},pod2datapromotionindex:{description:"",type:{name:"string"},required:!1},pod2datapromotionname:{description:"",type:{name:"string"},required:!1}}};var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/preview-api");const _excluded=["user"],Heropods_stories={title:"ELC/Hero Pods",component:HeroPods,parameters:{layout:"centered"},argTypes:{user:{options:["stories","hasina","shermin","sam"],control:{type:"select"}}}},HeroPodsContianer={args:{user:"stories",textcolor:"",backgroundcolor:"",bordercolor:"",buttoncolor:"",buttonbackgroundcolor:"",buttonhovercolor:"",buttonhoverbackcolor:"",pod1image:"",pod1alt:"",pod1title:"",pod1text:"",pod1buttontext:"",pod1link:"",pod1dataelementtype:"",pod1datapromotionindex:"",pod1datapromotionname:"",pod2image:"",pod2alt:"",pod2title:"",pod2text:"",pod2buttontext:"",pod2link:"",pod2dataelementtype:"",pod2datapromotionindex:"",pod2datapromotionname:""},render:function Render(args){const[currentArgs,updateArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),isLoadingRef=(0,react.useRef)(!1),lastUserRef=(0,react.useRef)(args.user),lastSyncedData=(0,react.useRef)({});return(0,react.useEffect)((()=>{(async()=>{isLoadingRef.current=!0,lastUserRef.current=args.user;try{const docRef=(0,index_esm.H9)(firebase.db,args.user,"heropods"),snap=await(0,index_esm.x7)(docRef);if(snap.exists()){const firestoreData=snap.data();lastSyncedData.current=firestoreData,updateArgs((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)({},currentArgs),firestoreData),{},{user:args.user}))}}catch(e){console.error("Firestore load error:",e)}isLoadingRef.current=!1})()}),[args.user]),(0,react.useEffect)((()=>{if(isLoadingRef.current)return;const selectedUser=lastUserRef.current;if(currentArgs.user!==selectedUser)return;const{user}=currentArgs,fields=(0,objectWithoutProperties.A)(currentArgs,_excluded),prevFields=lastSyncedData.current;if(!Object.entries(fields).some((_ref=>{let[k,v]=_ref;return prevFields[k]!==v})))return;lastSyncedData.current=fields;(async()=>{try{const docRef=(0,index_esm.H9)(firebase.db,selectedUser,"heropods");await(0,index_esm.mZ)(docRef,fields),console.log("UPDATED:",selectedUser,fields)}catch(e){console.error("Firestore update error:",e)}})()}),[currentArgs]),(0,jsx_runtime.jsx)(HeroPods,(0,objectSpread2.A)({},args))}},__namedExportsOrder=["HeroPodsContianer"];HeroPodsContianer.parameters={...HeroPodsContianer.parameters,docs:{...HeroPodsContianer.parameters?.docs,source:{originalSource:"{\n  args: {\n    user: 'stories',\n    textcolor: '',\n    backgroundcolor: '',\n    bordercolor: '',\n    buttoncolor: '',\n    buttonbackgroundcolor: '',\n    buttonhovercolor: '',\n    buttonhoverbackcolor: '',\n    pod1image: '',\n    pod1alt: '',\n    pod1title: '',\n    pod1text: '',\n    pod1buttontext: '',\n    pod1link: '',\n    pod1dataelementtype: '',\n    pod1datapromotionindex: '',\n    pod1datapromotionname: '',\n    pod2image: '',\n    pod2alt: '',\n    pod2title: '',\n    pod2text: '',\n    pod2buttontext: '',\n    pod2link: '',\n    pod2dataelementtype: '',\n    pod2datapromotionindex: '',\n    pod2datapromotionname: ''\n  },\n  render: function Render(args) {\n    const [currentArgs, updateArgs] = useArgs();\n    const isLoadingRef = useRef(false); // prevents writing during load\n    const lastUserRef = useRef(args.user); // track selected user\n    const lastSyncedData = useRef({}); // prevent write loops\n\n    // -------------------------------------------------------\n    // 1. LOAD DATA FROM SELECTED USER\n    // -------------------------------------------------------\n    useEffect(() => {\n      const load = async () => {\n        isLoadingRef.current = true; // BLOCK updates\n        lastUserRef.current = args.user;\n        try {\n          const docRef = doc(db, args.user, \"heropods\");\n          const snap = await getDoc(docRef);\n          if (snap.exists()) {\n            const firestoreData = snap.data();\n            lastSyncedData.current = firestoreData;\n\n            // Replace storybook args with loaded data\n            updateArgs({\n              ...currentArgs,\n              ...firestoreData,\n              user: args.user\n            });\n          }\n        } catch (e) {\n          console.error(\"Firestore load error:\", e);\n        }\n        isLoadingRef.current = false; // allow updates again\n      };\n      load();\n    }, [args.user]);\n\n    // -------------------------------------------------------\n    // 2. SYNC ONLY FIELD CHANGES (NOT USER CHANGE)\n    // -------------------------------------------------------\n    useEffect(() => {\n      if (isLoadingRef.current) return; // Don't sync during load\n\n      const selectedUser = lastUserRef.current;\n\n      // Don't sync if this change is caused by selecting a new user\n      if (currentArgs.user !== selectedUser) return;\n\n      // Remove user field before writing\n      const {\n        user,\n        ...fields\n      } = currentArgs;\n\n      // Prevent re-writing unchanged data\n      const prevFields = lastSyncedData.current;\n      const changed = Object.entries(fields).some(([k, v]) => prevFields[k] !== v);\n      if (!changed) return;\n      lastSyncedData.current = fields;\n      const send = async () => {\n        try {\n          const docRef = doc(db, selectedUser, \"heropods\");\n          await updateDoc(docRef, fields);\n          console.log(\"UPDATED:\", selectedUser, fields);\n        } catch (e) {\n          console.error(\"Firestore update error:\", e);\n        }\n      };\n      send();\n    }, [currentArgs]);\n    return <HeroPods {...args} />;\n  }\n}",...HeroPodsContianer.parameters?.docs?.source}}}}}]);