"use strict";(self.webpackChunkentertainer_redesign=self.webpackChunkentertainer_redesign||[]).push([[358],{"./src/config/firebase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{db:()=>db});var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/firebase/app/dist/esm/index.esm.js"),firebase_firestore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js");const app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.Wp)({apiKey:"AIzaSyDLmVO4qOiYb8dTm9tIUSUyZZXliuddo1c",authDomain:"storybook-58efc.firebaseapp.com",projectId:"storybook-58efc",storageBucket:"storybook-58efc.firebasestorage.app",messagingSenderId:"10714570266",appId:"1:10714570266:web:1086b72b26588d72193ba3"}),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.aU)(app)},"./src/stories/Kidulttabs.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{KidultTabsContainer:()=>KidultTabsContainer,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Kidulttabs_stories});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),firebase=__webpack_require__("./src/config/firebase.js"),index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const KidultTabs=_ref=>{let{tabareatitle,tab1title,tab2title,tab3title,tab4title,tab1content,tab2content,tab3content,tab4content}=_ref;return setTimeout((function(){const tabButtons=document.querySelectorAll(".tabs .tab"),tabContents=document.querySelectorAll(".tab-content");tabButtons&&tabContents&&tabButtons.forEach((tabBtn=>{tabBtn.addEventListener("click",(()=>{const tabId=tabBtn.getAttribute("data-tab");tabButtons.forEach((btn=>btn.classList.remove("active"))),tabBtn.classList.add("active"),tabContents.forEach((content=>{content.classList.remove("active"),content.id===tabId&&content.classList.add("active")}))}))}))}),1e3),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:"\n  :root {\n  --kidultroundal1bg: #000;\n}\n  .category-title {\n    display: none !important;\n  }\n    .kidult {\n    padding: 40px 20px 20px;\n    background-color: #000;\n    box-sizing: border-box;\n  }\n\n  .kidult-content {\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n\n  h1 {\n    font-size: 50px;\n    font-family: 'Billy Bold', Arial, Helvetica, sans-serif;\n    font-weight: 700;\n    line-height: 40px;\n    color:  rgb(147 51 234);\n    text-align: center;\n    margin: 15px 0;\n    padding: 0;\n    text-transform: uppercase;\n  }\n\n  p {\n    color: rgb(243 244 246);\n    text-align: center;\n  }\n\n  .carousel-cell {\n    width: 33.333333%;\n    padding: 20px 10px;\n  }\n\n  @media (min-width: 1024px) {\n    .carousel-cell {\n      width: 20%;\n    }\n  }\n\n  .carousel-cell .roundal-image img {\n    position: relative;\n    z-index: 2;\n    aspect-ratio: 1 / 1;\n    width: 100%;\n    height: auto;\n    border-radius: 100%;\n    overflow: hidden;\n    margin: 0;\n  }\n\n  .roundal-image {\n    border-radius: 100%;\n    position: relative;\n    padding: 4px;\n    overflow: hidden;\n    aspect-ratio: 1/1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  @media (min-width: 1024px) {\n    .roundal-image {\n      padding: 8px;\n    }\n  }\n\n  .roundal-image img {\n    position: relative;\n    z-index: 2;\n    width: 95%;\n    min-width: unset;\n    height: auto;\n    overflow: hidden;\n    margin: 10px;\n  }\n\n  @media (min-width: 1024px) {\n    margin: 25px;\n  }\n\n  .pageType-CategoryPage .map img {\n    min-width: unset;\n  }\n\n  .roundal-image::before {\n    content: '';\n    display: block;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    aspect-ratio: 1/1;\n    background: linear-gradient(\n      to bottom right,\n      #222,\n      #888 35%,\n      #888 65%,\n      #222 100%\n    );\n  }\n\n  .tab-content .roundal-image::after {\n    content: '';\n    display: block;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    position: absolute;\n    top: 4px;\n    left: 4px;\n    aspect-ratio: 1/1;\n    background: var(--kidultroundal1bg);\n    border-radius: 100%;\n  }\n\n  .outer-link {\n    display: flex;\n    flex-direction: column;\n    gap: 15px;\n    transition: all 0.3s;\n  }\n\n  .outer-link:hover .roundal-image::before {\n    transition: all 0.6s;\n    transform: rotate(1turn);\n  }\n  \n  .outer-link:hover {\n    filter: drop-shadow(0 2px rgba(147 51 234)) drop-shadow(0 -2px rgb(147 51 234)) drop-shadow(2px 0 rgb(147 51 234)) drop-shadow(-2px 0 rgb(147 51 234))\n  }\n\n\n  .outer-link button {\n    background: linear-gradient(\n      to bottom right,\n      #7e22ce,\n      #a855f7 25%,\n      #a855f7 75%,\n      #7e22ce 100%\n    );\n    border: 2px solid rgb(209 213 219);\n    min-height: 50px;\n    display: block;\n    line-height: 1.2;\n    color: #fff;\n    border-radius: 30px;\n    font-size: 13px;\n  }\n\n  .outer-link:hover button {\n    transform: scale(1.02);\n  }\n\n  .tabs {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .tabs .tab {\n    color: #000;\n    position: relative;\n    cursor: pointer;\n    padding: 10px 5px 0;\n    margin-bottom: 20px;\n    transition: all 0.3s ease-in-out;\n  }\n\n  .tabs .tab span {\n    width: 100%;\n    text-align: center;\n    position: absolute;\n    left: 0;\n    bottom: 10px;\n    font-family: \"Nunito Bold\", \"Tahoma Bold\", sans-serif;\n    font-weight: normal;\n    font-size: 10px;\n    letter-spacing: 0;\n    padding: 0 5px;\n    line-height: 1;\n  }\n\n  .tabs .tab svg {\n    width: 70px;\n    height: auto;\n  }\n\n  @media (min-width: 1024px) {\n    .tabs .tab span {\n      font-size: 12px;\n      padding: 0 10px;\n      bottom: 15px;\n    }\n\n    .tabs .tab:hover,\n    .tabs .tab.active {\n      transform: scale(1.2);\n    }\n\n    .tabs .tab svg {\n      width: 90px;\n      height: auto;\n      font-size: 12px;\n    }\n  }\n\n  .tabs .tab.tab3 svg {\n    filter: drop-shadow(0 2px #0a703a) drop-shadow(0 -2px #0a703a)\n    drop-shadow(2px 0 #0a703a) drop-shadow(-2px 0 #0a703a);\n  }\n\n  .tabs .tab.tab3:hover,\n  .tabs .tab.tab3.active {\n    color: #0a703a;\n  }\n\n  .tabs .tab.tab3 span {\n    color: #0a703a;\n  }\n\n  .tabs .tab.tab4 svg {\n    filter: drop-shadow(0 2px #008bc7) drop-shadow(0 -2px #008bc7)\n    drop-shadow(2px 0 #008bc7) drop-shadow(-2px 0 #008bc7);\n  }\n\n  .tabs .tab.tab4 span{\n    color: #008bc7;\n  }\n\n  .tabs .tab.tab4:hover,\n  .tabs .tab.tab4.active {\n    color: #008bc7;\n  }\n\n  .tabs .tab.tab1 svg {\n    filter: drop-shadow(0 2px #b96e17) drop-shadow(0 -2px #b96e17)\n    drop-shadow(2px 0 #b96e17) drop-shadow(-2px 0 #b96e17);\n  }\n\n  .tabs .tab.tab1 span {\n    color: #b96e17;\n  }\n\n  .tabs .tab.tab1:hover,\n  .tabs .tab.tab1.active {\n    color: #b96e17;\n  }\n\n  .tabs .tab.tab2 svg {\n    filter: drop-shadow(0 2px #ff00ff) drop-shadow(0 -2px #ff00ff)\n    drop-shadow(2px 0 #ff00ff) drop-shadow(-2px 0 #ff00ff);\n  }\n\n  .tabs .tab.tab2 span {\n    color: #ff00ff\n  }\n\n  .tabs .tab.tab2:hover,\n  .tabs .tab.tab2.active {\n    color: #ff00ff;\n  }\n\n  .tabs .tab:hover span,\n  .tabs .tab.active span {\n    color: #fff;\n  }\n\n  .tabs .tab:hover svg,\n  .tabs .tab.active svg {\n    filter: drop-shadow(0 2px #fff) drop-shadow(0 -2px #fff)\n    drop-shadow(2px 0 #fff) drop-shadow(-2px 0 #fff);\n  }\n\n  .tab-content {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    width: 100%;\n  }\n\n  .tab-content .roundal {\n    width: calc(100% / 3);\n    padding: 10px;\n  }\n\n  .tab-content .roundal .roundal-image {\n    padding: 5px;\n  }\n\n  .tab-content .roundal .outer-link button {\n    border-color: #a855f7;\n    font-size: 12px;\n    background: transparent;\n  }\n  .tab-content .outer-link:hover {\n    filter: drop-shadow(0 2px rgba(147, 51, 234, 0.5)) drop-shadow(0 -2px rgba(147, 51, 234, 0.5)) drop-shadow(2px 0 rgba(147, 51, 234, 0.5)) drop-shadow(-2px 0 rgba(147, 51, 234, 0.5))\n  }\n\n  @media (min-width: 1024px) {\n    .tab-content .roundal .outer-link button {\n      font-size: 14px;\n    }\n    .tab-content .roundal {\n      width: calc(100% / 6);\n    }\n\n    .tabs .tab {\n      padding: 10px 20px 0;\n    }\n\n    .tabs .tab span {\n      font-size: 13px;\n      padding: 0 30px;\n      bottom: 18px;\n    }\n\n    .tabs .tab svg {\n      width: 110px;\n    }\n  }\n\n  .tab-content-container {\n    background: linear-gradient(\n      to bottom right,\n      #222,\n      #888 35%,\n      #888 65%,\n      #222 100%\n    );\n    border-radius: 20px;\n    padding: 5px;;\n    position: relative;\n  }\n\n  .tab-content {\n    max-height: 0;\n    overflow: hidden;\n    opacity: 0;\n    transition: all 0.2s ease-in-out;\n  }\n\n  .tab-content-inner {\n    padding: 10px;\n    width: 100%;\n    background: linear-gradient(\n      to bottom right,\n      #000,\n      #111 25%,\n      #111 55%,\n      #000 100%\n    );\n    border-radius: 20px;\n  }\n\n  .tab-content.active {\n    padding: 5px;\n    max-height: 2000px;\n    opacity: 1;\n  }\n\n  .flickity-button,\n  .carousel-component .js-owl-carousel-reference .owl-buttons .owl-prev, .carousel-component .js-owl-carousel-reference .owl-buttons .owl-next {\n    top: 42%;\n    background-color: #000;\n    border: 2px solid #fff;\n    transition: all 0.3s;\n    box-shadow: none;\n    opacity: 0.7;\n    filter: drop-shadow(0 1px 1px rgb(147 51 234)) drop-shadow(0 -1px 1px rgb(147 51 234)) drop-shadow(1px 0 1px rgb(147 51 234)) drop-shadow(-1px 0 1px rgb(147 51 234));\n  }\n\n  .flickity-button.flickity-prev-next-button.next {\n    right: -15px;\n  }\n\n  .flickity-button.flickity-prev-next-button.previous {\n    left: -15px;\n  }\n\n  .flickity-button:hover,\n  .carousel-component .js-owl-carousel-reference .owl-buttons .owl-prev:hover, .carousel-component .js-owl-carousel-reference .owl-buttons .owl-next:hover {\n    border-color: #a855f7;\n    color:#a855f7;\n    opacity: 1;\n    filter: drop-shadow(0 2px 2px rgb(147 51 234)) drop-shadow(0 -2px 2px rgb(147 51 234)) drop-shadow(2px 0 2px rgb(147 51 234)) drop-shadow(-2px 0 2px rgb(147 51 234));\n  }\n\n  .tab-content .spongebob .roundal-image::after {\n    background-color: #FFF56C;\n  }\n\n  .tab-content .simpsons .roundal-image::after {\n    background-color: #41C7F3;\n  }\n\n  .tab-content .marvel .roundal-image::after {\n    background-color: #EC1D24;\n  }\n\n  .tab-content .dc .roundal-image::after {\n    background-color: #fff;\n  }\n\n  .tab-content .harry-potter .roundal-image::after {\n    background-color: #2A0A44;\n  }\n\n  .tab-content .turtles .roundal-image::after {\n    background-color: #9B9B9B;\n  }\n\n  .tab-content .kpop .roundal-image::after {\n    background-color: #653E85;\n  }\n\n  .tab-content .sonic .roundal-image::after {\n    background-color: #007AFF;\n  }\n\n  .tab-content .nintendo .roundal-image::after {\n    background-color: #E60012;\n  }\n\n  .tab-content .rainbow-friends .roundal-image::after {\n    background-color: #93C650;\n  }\n\n  .tab-content .garten .roundal-image::after {\n    background-color: #FB9851;\n  }\n\n  .tab-content .minecraft .roundal-image::after {\n    background-color: #3C8527;\n  }\n\n  .tab-content .pokemon .roundal-image::after {\n    background-color: #0096D1;\n  }\n\n  .tab-content .hot-wheels .roundal-image::after {\n    background-color: #0057B8;\n  }\n\n  .tab-content .barbie .roundal-image::after {\n    background-color: #EB008B;\n  }\n\n  .tab-content .barbie .roundal-image img {\n    width: 85%;\n  }\n\n  .tab-content .wwe .roundal-image::after {\n    background-color: #222222;\n  }\n\n  .tab-content .wwe .roundal-image img {\n    width: 80%;\n  }\n\n  .tab-content .funko .roundal-image::after {\n    background-color: #0074CA;\n  }\n\n  .tab-content .funko .roundal-image img {\n    width: 90%;\n  }\n\n  .tab-content .topps .roundal-image img {\n    width: 90%;\n  }\n\n  .tab-content .fuggler .roundal-image::after {\n    background-color: #C9A385;\n  }\n\n  .tab-content .f1 .roundal-image::after {\n    background-color: #1C1C25;\n  }\n\n  .tab-content .miniverse .roundal-image::after {\n    background-color: #fff;\n  }\n\n  .tab-content .lego .roundal-image::after {\n    background-color: #000;\n  }\n\n  .tab-content .lego .roundal-image img {\n    width: 100%;\n    border-radius: 100%;\n  }\n\n  .tab-content .pokemon-mega .roundal-image::after {\n    background-color: #0096D1;\n  }\n\n  .tab-content .pokemon-mega .roundal-image img {\n    width: 60%;\n  }\n\n  .tab-content .brick-shop .roundal-image img {\n    width: 80%;\n  }\n\n  .tab-content .fnaf .roundal-image img {\n    width: 80%;\n  }\n"}),(0,jsx_runtime.jsx)("div",{class:"kidult",children:(0,jsx_runtime.jsxs)("div",{class:"kidult-content",children:[(0,jsx_runtime.jsx)("h3",{children:tabareatitle}),(0,jsx_runtime.jsx)("div",{class:"tab-content-container",children:(0,jsx_runtime.jsx)("div",{class:"tab-content-inner",children:(0,jsx_runtime.jsxs)("div",{class:"tabs-container",children:[(0,jsx_runtime.jsxs)("div",{class:"tabs",children:[(0,jsx_runtime.jsxs)("div",{class:"tab tab1 active","data-tab":"tab1",children:[(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"58",height:"38",viewBox:"0 0 48 28",fill:"none",children:[(0,jsx_runtime.jsx)("path",{d:"M23.6899 20.55C29.2128 20.55 33.6899 16.0729 33.6899 10.55C33.6899 5.02716 29.2128 0.550003 23.6899 0.550003C18.1671 0.550003 13.6899 5.02716 13.6899 10.55C13.6899 16.0729 18.1671 20.55 23.6899 20.55Z",fill:"currentColor"}),(0,jsx_runtime.jsx)("path",{d:"M10.1899 7.07001H37.1899C42.7099 7.07001 47.1899 11.55 47.1899 17.07C47.1899 22.59 42.7099 27.07 37.1899 27.07H10.1899C4.66994 27.07 0.189941 22.59 0.189941 17.07C0.189941 11.55 4.66994 7.07001 10.1899 7.07001Z",fill:"currentColor"})]}),(0,jsx_runtime.jsx)("span",{children:tab1title})]}),(0,jsx_runtime.jsxs)("div",{class:"tab tab2","data-tab":"tab2",children:[(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"58",height:"38",viewBox:"0 0 48 28",fill:"none",children:[(0,jsx_runtime.jsx)("path",{d:"M23.6899 20.55C29.2128 20.55 33.6899 16.0729 33.6899 10.55C33.6899 5.02716 29.2128 0.550003 23.6899 0.550003C18.1671 0.550003 13.6899 5.02716 13.6899 10.55C13.6899 16.0729 18.1671 20.55 23.6899 20.55Z",fill:"currentColor"}),(0,jsx_runtime.jsx)("path",{d:"M10.1899 7.07001H37.1899C42.7099 7.07001 47.1899 11.55 47.1899 17.07C47.1899 22.59 42.7099 27.07 37.1899 27.07H10.1899C4.66994 27.07 0.189941 22.59 0.189941 17.07C0.189941 11.55 4.66994 7.07001 10.1899 7.07001Z",fill:"currentColor"})]}),(0,jsx_runtime.jsx)("span",{children:tab2title})]}),(0,jsx_runtime.jsxs)("div",{class:"tab tab3","data-tab":"tab3",children:[(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"58",height:"38",viewBox:"0 0 48 28",fill:"none",children:[(0,jsx_runtime.jsx)("path",{d:"M23.6899 20.55C29.2128 20.55 33.6899 16.0729 33.6899 10.55C33.6899 5.02716 29.2128 0.550003 23.6899 0.550003C18.1671 0.550003 13.6899 5.02716 13.6899 10.55C13.6899 16.0729 18.1671 20.55 23.6899 20.55Z",fill:"currentColor"}),(0,jsx_runtime.jsx)("path",{d:"M10.1899 7.07001H37.1899C42.7099 7.07001 47.1899 11.55 47.1899 17.07C47.1899 22.59 42.7099 27.07 37.1899 27.07H10.1899C4.66994 27.07 0.189941 22.59 0.189941 17.07C0.189941 11.55 4.66994 7.07001 10.1899 7.07001Z",fill:"currentColor"})]}),(0,jsx_runtime.jsx)("span",{children:tab3title})]}),(0,jsx_runtime.jsxs)("div",{class:"tab tab4","data-tab":"tab4",children:[(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"58",height:"38",viewBox:"0 0 48 28",fill:"none",children:[(0,jsx_runtime.jsx)("path",{d:"M23.6899 20.55C29.2128 20.55 33.6899 16.0729 33.6899 10.55C33.6899 5.02716 29.2128 0.550003 23.6899 0.550003C18.1671 0.550003 13.6899 5.02716 13.6899 10.55C13.6899 16.0729 18.1671 20.55 23.6899 20.55Z",fill:"currentColor"}),(0,jsx_runtime.jsx)("path",{d:"M10.1899 7.07001H37.1899C42.7099 7.07001 47.1899 11.55 47.1899 17.07C47.1899 22.59 42.7099 27.07 37.1899 27.07H10.1899C4.66994 27.07 0.189941 22.59 0.189941 17.07C0.189941 11.55 4.66994 7.07001 10.1899 7.07001Z",fill:"currentColor"})]}),(0,jsx_runtime.jsx)("span",{children:tab4title})]})]}),(0,jsx_runtime.jsx)("div",{id:"tab1",class:"tab-content active",dangerouslySetInnerHTML:{__html:tab1content}}),(0,jsx_runtime.jsx)("div",{id:"tab2",class:"tab-content",dangerouslySetInnerHTML:{__html:tab2content}}),(0,jsx_runtime.jsx)("div",{id:"tab3",class:"tab-content",dangerouslySetInnerHTML:{__html:tab3content}}),(0,jsx_runtime.jsx)("div",{id:"tab4",class:"tab-content",dangerouslySetInnerHTML:{__html:tab4content}})]})})})]})})]})};KidultTabs.__docgenInfo={description:"Primary UI component for user interaction",methods:[],displayName:"KidultTabs",props:{tabareatitle:{description:"Kidult Tabs contents",type:{name:"string"},required:!1},tab1title:{description:"",type:{name:"string"},required:!0},tab2title:{description:"",type:{name:"string"},required:!0},tab3title:{description:"",type:{name:"string"},required:!0},tab4title:{description:"",type:{name:"string"},required:!1},tab1content:{description:"",type:{name:"string"},required:!1},tab2content:{description:"",type:{name:"string"},required:!1},tab3content:{description:"",type:{name:"string"},required:!1},tab4content:{description:"",type:{name:"string"},required:!1}}};var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/preview-api");const _excluded=["user"],Kidulttabs_stories={title:"Kidult/Tabs",component:KidultTabs,parameters:{layout:"fullscreen"},argTypes:{user:{options:["stories","hasina","shermin","sam"],control:{type:"select"}}}},KidultTabsContainer={args:{user:"stories",tabareatitle:"",tab1title:"",tab2title:"",tab3title:"",tab4title:"",tab1content:"",tab2content:"",tab3content:"",tab4content:""},render:function Render(args){const[currentArgs,updateArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),isLoadingRef=(0,react.useRef)(!1),lastUserRef=(0,react.useRef)(args.user),lastSyncedData=(0,react.useRef)({});return(0,react.useEffect)((()=>{(async()=>{isLoadingRef.current=!0,lastUserRef.current=args.user;try{const docRef=(0,index_esm.H9)(firebase.db,args.user,"kidulttabs"),snap=await(0,index_esm.x7)(docRef);if(snap.exists()){const firestoreData=snap.data();lastSyncedData.current=firestoreData,updateArgs((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)({},currentArgs),firestoreData),{},{user:args.user}))}}catch(e){console.error("Firestore load error:",e)}isLoadingRef.current=!1})()}),[args.user]),(0,react.useEffect)((()=>{if(isLoadingRef.current)return;const selectedUser=lastUserRef.current;if(currentArgs.user!==selectedUser)return;const{user}=currentArgs,fields=(0,objectWithoutProperties.A)(currentArgs,_excluded),prevFields=lastSyncedData.current;if(!Object.entries(fields).some((_ref=>{let[k,v]=_ref;return prevFields[k]!==v})))return;lastSyncedData.current=fields;(async()=>{try{const docRef=(0,index_esm.H9)(firebase.db,selectedUser,"kidulttabs");await(0,index_esm.mZ)(docRef,fields),console.log("UPDATED:",selectedUser,fields)}catch(e){console.error("Firestore update error:",e)}})()}),[currentArgs]),(0,jsx_runtime.jsx)(KidultTabs,(0,objectSpread2.A)({},args))}},__namedExportsOrder=["KidultTabsContainer"];KidultTabsContainer.parameters={...KidultTabsContainer.parameters,docs:{...KidultTabsContainer.parameters?.docs,source:{originalSource:"{\n  args: {\n    user: 'stories',\n    tabareatitle: '',\n    tab1title: '',\n    tab2title: '',\n    tab3title: '',\n    tab4title: '',\n    tab1content: ``,\n    tab2content: \"\",\n    tab3content: '',\n    tab4content: ''\n  },\n  render: function Render(args) {\n    const [currentArgs, updateArgs] = useArgs();\n    const isLoadingRef = useRef(false); // prevents writing during load\n    const lastUserRef = useRef(args.user); // track selected user\n    const lastSyncedData = useRef({}); // prevent write loops\n\n    // -------------------------------------------------------\n    // 1. LOAD DATA FROM SELECTED USER\n    // -------------------------------------------------------\n    useEffect(() => {\n      const load = async () => {\n        isLoadingRef.current = true; // BLOCK updates\n        lastUserRef.current = args.user;\n        try {\n          const docRef = doc(db, args.user, \"kidulttabs\");\n          const snap = await getDoc(docRef);\n          if (snap.exists()) {\n            const firestoreData = snap.data();\n            lastSyncedData.current = firestoreData;\n\n            // Replace storybook args with loaded data\n            updateArgs({\n              ...currentArgs,\n              ...firestoreData,\n              user: args.user\n            });\n          }\n        } catch (e) {\n          console.error(\"Firestore load error:\", e);\n        }\n        isLoadingRef.current = false; // allow updates again\n      };\n      load();\n    }, [args.user]);\n\n    // -------------------------------------------------------\n    // 2. SYNC ONLY FIELD CHANGES (NOT USER CHANGE)\n    // -------------------------------------------------------\n    useEffect(() => {\n      if (isLoadingRef.current) return; // Don't sync during load\n\n      const selectedUser = lastUserRef.current;\n\n      // Don't sync if this change is caused by selecting a new user\n      if (currentArgs.user !== selectedUser) return;\n\n      // Remove user field before writing\n      const {\n        user,\n        ...fields\n      } = currentArgs;\n\n      // Prevent re-writing unchanged data\n      const prevFields = lastSyncedData.current;\n      const changed = Object.entries(fields).some(([k, v]) => prevFields[k] !== v);\n      if (!changed) return;\n      lastSyncedData.current = fields;\n      const send = async () => {\n        try {\n          const docRef = doc(db, selectedUser, \"kidulttabs\");\n          await updateDoc(docRef, fields);\n          console.log(\"UPDATED:\", selectedUser, fields);\n        } catch (e) {\n          console.error(\"Firestore update error:\", e);\n        }\n      };\n      send();\n    }, [currentArgs]);\n    return <KidultTabs {...args} />;\n  }\n}",...KidultTabsContainer.parameters?.docs?.source}}}}}]);