"use strict";(self.webpackChunkentertainer_redesign=self.webpackChunkentertainer_redesign||[]).push([[253],{"./src/config/firebase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{db:()=>db});var firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/firebase/app/dist/esm/index.esm.js"),firebase_firestore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js");const app=(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.Wp)({apiKey:"AIzaSyDLmVO4qOiYb8dTm9tIUSUyZZXliuddo1c",authDomain:"storybook-58efc.firebaseapp.com",projectId:"storybook-58efc",storageBucket:"storybook-58efc.firebasestorage.app",messagingSenderId:"10714570266",appId:"1:10714570266:web:1086b72b26588d72193ba3"}),db=(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.aU)(app)},"./src/stories/Shopbyage.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ShopByAgeRoundals:()=>ShopByAgeRoundals,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Shopbyage_stories});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),firebase=__webpack_require__("./src/config/firebase.js"),index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ShopByAge=_ref=>{let{images,roundal1image,roundal1background,roundal1color,roundal1alt,roundal1age,roundal1textunderage,roundal1link,roundal2image,roundal2background,roundal2color,roundal2alt,roundal2age,roundal2textunderage,roundal2link,roundal3image,roundal3background,roundal3color,roundal3alt,roundal3age,roundal3textunderage,roundal3link,roundal4image,roundal4background,roundal4color,roundal4alt,roundal4age,roundal4textunderage,roundal4link,roundal5image,roundal5background,roundal5color,roundal5alt,roundal5age,roundal5textunderage,roundal5link,roundal6image,roundal6background,roundal6color,roundal6alt,roundal6age,roundal6textunderage,roundal6link,rounbdal1dataelementtype,rounbdal1datapromotionindex,roundal1datapromotionname,roundal2dataelementtype,roundal2datapromotionindex,roundal2datapromotionname,roundal3dataelementtype,roundal3datapromotionindex,roundal3datapromotionname,roundal4dataelementtype,roundal4datapromotionindex,roundal4datapromotionname,roundal5dataelementtype,roundal5datapromotionindex,roundal5datapromotionname,roundal6dataelementtype,roundal6datapromotionindex,roundal6datapromotionname}=_ref;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:'\n        body {\n        background-color: #dbe3ff;\n        }\n    .shop-by-age {\n      max-width: 1200px;\n      margin: 0 auto;\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n      gap: 10px;\n      padding: 20px;\n      justify-content: center; /* centers items if row isn\'t full */\n      align-content: center;\n    }\n\n    .shop-by-age .carousel-cell {\n        width: calc(100% / 4);\n        padding: 0px 5px 10px;\n    }\n\n    .shop-by-age a {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        border-radius: 100%;\n        background-color: #E5BB07;\n        color: #fff;\n        aspect-ratio: 1/1;\n        text-decoration: none;\n        font: 15px/100% "Billy Bold", "Tahoma Bold", sans-serif;\n        transition: all 0.3s;\n        line-height: 1.1;\n        box-shadow: 0 0 3px rgba(3,33,33,.4);\n        text-shadow: 0px 0px 4px rgba(0,0,0,0.25);\n    }\n\n    .shop-by-age a:hover {\n        box-shadow: 0 0 15px rgba(3,33,33,.4);\n        transform: translateY(-5px) rotate(5deg);\n        scale: 1.05;\n    }\n\n    .shop-by-age span {\n        display: block;\n        font-size: 10px;\n    }\n\n    @media (min-width: 768px) {\n      .shop-by-age .carousel-cell {\n        width: calc(100% / 7);\n        padding: 10px 10px 0;\n    }\n        .shop-by-age a {\n            font-size: 28px;\n        }\n\n        .shop-by-age span {\n            font-size: 20px;\n        }\n    }\n\n    @media (min-width: 1024x) {\n        .shop-by-age a {\n            font-size: 34px;\n        }\n\n        .shop-by-age span {\n            font-size: 30px;\n        }\n    }\n\n    /* enable Flickity by default */\n.shop-by-age:after {\n  content: \'flickity\';\n  display: none; /* hide :after */\n}\n\n@media (min-width: 768px) {\n  /* disable Flickity for large devices */\n  .shop-by-age:after {\n    content: \'\';\n  }\n\n  .shop-by-age {\n    display: flex;\n  }\n}\n\n    .shop-by-age a img {\n      display: block;\n      width: 100%;\n      height: auto;\n    }\n\n    .shop-by-age.not-images a {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        border-radius: 100%;\n        background-color: #E5BB07;\n        color: #fff;\n        aspect-ratio: 1/1;\n        text-decoration: none;\n        font: 15px/100% "Billy Bold", "Tahoma Bold", sans-serif;\n        transition: all 0.3s;\n        line-height: 1.1;\n        box-shadow: 0 0 3px rgba(3,33,33,.4);\n        text-shadow: 0px 0px 4px rgba(0,0,0,0.25);\n    }\n\n    @media (min-width: 769px) {\n        .shop-by-age.not-images a {\n            font-size: 28px;\n        }\n\n        .shop-by-age.not-images span {\n            font-size: 20px;\n        }\n    }\n\n    @media (min-width: 1024px) {\n        .shop-by-age.not-images a {\n            font-size: 34px;\n        }\n\n        .shop-by-age.not-images span {\n            font-size: 30px;\n        }\n    }\n        '}),(0,jsx_runtime.jsx)("div",{class:"shop-by-age-container",children:(0,jsx_runtime.jsxs)("div",{class:"shop-by-age ".concat(!images&&"not-images"),children:[roundal1link&&(0,jsx_runtime.jsxs)("a",{href:roundal1link,title:roundal1alt,"data-element-type":rounbdal1dataelementtype,"data-promotion-index":rounbdal1datapromotionindex,"data-promotion-name":roundal1datapromotionname,style:{background:images?"transparent":roundal1background,color:roundal1color},children:[images&&(0,jsx_runtime.jsx)("img",{src:roundal1image,alt:roundal1alt}),!images&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roundal1age,(0,jsx_runtime.jsx)("span",{children:roundal1textunderage})]})]}),roundal2link&&(0,jsx_runtime.jsxs)("a",{href:roundal2link,title:roundal2alt,"data-element-type":roundal2dataelementtype,"data-promotion-index":roundal2datapromotionindex,"data-promotion-name":roundal2datapromotionname,style:{background:images?"transparent":roundal2background,color:roundal2color},children:[images&&(0,jsx_runtime.jsx)("img",{src:roundal2image,alt:roundal2alt}),!images&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roundal2age,(0,jsx_runtime.jsx)("span",{children:roundal2textunderage})]})]}),roundal3link&&(0,jsx_runtime.jsxs)("a",{href:roundal3link,title:roundal3alt,"data-element-type":roundal3dataelementtype,"data-promotion-index":roundal3datapromotionindex,"data-promotion-name":roundal3datapromotionname,style:{background:images?"transparent":roundal3background,color:roundal3color},children:[images&&(0,jsx_runtime.jsx)("img",{src:roundal3image,alt:roundal3alt}),!images&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roundal3age,(0,jsx_runtime.jsx)("span",{children:roundal3textunderage})]})]}),roundal4link&&(0,jsx_runtime.jsxs)("a",{href:roundal4link,title:roundal4alt,"data-element-type":roundal4dataelementtype,"data-promotion-index":roundal4datapromotionindex,"data-promotion-name":roundal4datapromotionname,style:{background:images?"transparent":roundal4background,color:roundal4color},children:[images&&(0,jsx_runtime.jsx)("img",{src:roundal4image,alt:roundal4alt}),!images&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roundal4age,(0,jsx_runtime.jsx)("span",{children:roundal4textunderage})]})]}),roundal5link&&(0,jsx_runtime.jsxs)("a",{href:roundal5link,title:roundal5alt,"data-element-type":roundal5dataelementtype,"data-promotion-index":roundal5datapromotionindex,"data-promotion-name":roundal5datapromotionname,style:{background:images?"transparent":roundal5background,color:roundal5color},children:[images&&(0,jsx_runtime.jsx)("img",{src:roundal5image,alt:roundal5alt}),!images&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roundal5age,(0,jsx_runtime.jsx)("span",{children:roundal5textunderage})]})]}),roundal6link&&(0,jsx_runtime.jsxs)("a",{href:roundal6link,title:roundal6alt,"data-element-type":roundal6dataelementtype,"data-promotion-index":roundal6datapromotionindex,"data-promotion-name":roundal6datapromotionname,style:{background:images?"transparent":roundal6background,color:roundal6color},children:[images&&(0,jsx_runtime.jsx)("img",{src:roundal6image,alt:roundal6alt}),!images&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roundal6age,(0,jsx_runtime.jsx)("span",{children:roundal6textunderage})]})]})]})})]})};ShopByAge.__docgenInfo={description:"Primary UI component for user interaction",methods:[],displayName:"ShopByAge",props:{images:{description:"contents",type:{name:"bool"},required:!1},roundal1image:{description:"",type:{name:"string"},required:!1},roundal1background:{description:"",type:{name:"string"},required:!1},roundal1color:{description:"",type:{name:"string"},required:!1},roundal1alt:{description:"",type:{name:"string"},required:!1},roundal1age:{description:"",type:{name:"string"},required:!1},roundal1textunderage:{description:"",type:{name:"string"},required:!1},roundal1link:{description:"",type:{name:"string"},required:!1},roundal2image:{description:"",type:{name:"string"},required:!1},roundal2background:{description:"",type:{name:"string"},required:!1},roundal2color:{description:"",type:{name:"string"},required:!1},roundal2alt:{description:"",type:{name:"string"},required:!1},roundal2age:{description:"",type:{name:"string"},required:!1},roundal2textunderage:{description:"",type:{name:"string"},required:!1},roundal2link:{description:"",type:{name:"string"},required:!1},roundal3image:{description:"",type:{name:"string"},required:!1},roundal3background:{description:"",type:{name:"string"},required:!1},roundal3color:{description:"",type:{name:"string"},required:!1},roundal3alt:{description:"",type:{name:"string"},required:!1},roundal3age:{description:"",type:{name:"string"},required:!1},roundal3textunderage:{description:"",type:{name:"string"},required:!1},roundal3link:{description:"",type:{name:"string"},required:!1},roundal4image:{description:"",type:{name:"string"},required:!1},roundal4background:{description:"",type:{name:"string"},required:!1},roundal4color:{description:"",type:{name:"string"},required:!1},roundal4alt:{description:"",type:{name:"string"},required:!1},roundal4age:{description:"",type:{name:"string"},required:!1},roundal4textunderage:{description:"",type:{name:"string"},required:!1},roundal4link:{description:"",type:{name:"string"},required:!1},roundal5image:{description:"",type:{name:"string"},required:!1},roundal5background:{description:"",type:{name:"string"},required:!1},roundal5color:{description:"",type:{name:"string"},required:!1},roundal5alt:{description:"",type:{name:"string"},required:!1},roundal5age:{description:"",type:{name:"string"},required:!1},roundal5textunderage:{description:"",type:{name:"string"},required:!1},roundal5link:{description:"",type:{name:"string"},required:!1},roundal6image:{description:"",type:{name:"string"},required:!1},roundal6background:{description:"",type:{name:"string"},required:!1},roundal6color:{description:"",type:{name:"string"},required:!1},roundal6alt:{description:"",type:{name:"string"},required:!1},roundal6age:{description:"",type:{name:"string"},required:!1},roundal6textunderage:{description:"",type:{name:"string"},required:!1},roundal6link:{description:"",type:{name:"string"},required:!1},rounbdal1dataelementtype:{description:"",type:{name:"string"},required:!1},rounbdal1datapromotionindex:{description:"",type:{name:"string"},required:!1},roundal1datapromotionname:{description:"",type:{name:"string"},required:!1},roundal2dataelementtype:{description:"",type:{name:"string"},required:!1},roundal2datapromotionindex:{description:"",type:{name:"string"},required:!1},roundal2datapromotionname:{description:"",type:{name:"string"},required:!1},roundal3dataelementtype:{description:"",type:{name:"string"},required:!1},roundal3datapromotionindex:{description:"",type:{name:"string"},required:!1},roundal3datapromotionname:{description:"",type:{name:"string"},required:!1},roundal4dataelementtype:{description:"",type:{name:"string"},required:!1},roundal4datapromotionindex:{description:"",type:{name:"string"},required:!1},roundal4datapromotionname:{description:"",type:{name:"string"},required:!1},roundal5dataelementtype:{description:"",type:{name:"string"},required:!1},roundal5datapromotionindex:{description:"",type:{name:"string"},required:!1},roundal5datapromotionname:{description:"",type:{name:"string"},required:!1},roundal6dataelementtype:{description:"",type:{name:"string"},required:!1},roundal6datapromotionindex:{description:"",type:{name:"string"},required:!1},roundal6datapromotionname:{description:"",type:{name:"string"},required:!1}}};var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/preview-api");const _excluded=["user"],Shopbyage_stories={title:"Home/Shop By Age",component:ShopByAge,parameters:{layout:"fullscreen"},argTypes:{user:{options:["stories","hasina","shermin","sam"],control:{type:"select"}}}},ShopByAgeRoundals={args:{user:"stories",images:!1,roundal1image:"",roundal1background:"",roundal1color:"",roundal1alt:"",roundal1age:"",roundal1textunderage:"",roundal1link:"",roundal2image:"",roundal2background:"",roundal2color:"",roundal2alt:"",roundal2age:"",roundal2textunderage:"",roundal2link:"",roundal3image:"",roundal3background:"",roundal3color:"",roundal3alt:"",roundal3age:"",roundal3textunderage:"",roundal3link:"",roundal4image:"",roundal4background:"",roundal4color:"",roundal4alt:"",roundal4age:"",roundal4textunderage:"",roundal4link:"",roundal5image:"",roundal5background:"",roundal5color:"",roundal5alt:"",roundal5age:"",roundal5textunderage:"",roundal5link:"",roundal6image:"",roundal6background:"",roundal6color:"",roundal6alt:"",roundal6age:"",roundal6textunderage:"",roundal6link:"",rounbdal1dataelementtype:"",rounbdal1datapromotionindex:"",roundal1datapromotionname:"",roundal2dataelementtype:"",roundal2datapromotionindex:"",roundal2datapromotionname:"",roundal3dataelementtype:"",roundal3datapromotionindex:"",roundal3datapromotionname:"",roundal4dataelementtype:"",roundal4datapromotionindex:"",roundal4datapromotionname:"",roundal5dataelementtype:"",roundal5datapromotionindex:"",roundal5datapromotionname:"",roundal6dataelementtype:"",roundal6datapromotionindex:"",roundal6datapromotionname:""},render:function Render(args){const[currentArgs,updateArgs]=(0,external_STORYBOOK_MODULE_PREVIEW_API_.useArgs)(),isLoadingRef=(0,react.useRef)(!1),lastUserRef=(0,react.useRef)(args.user),lastSyncedData=(0,react.useRef)({});return(0,react.useEffect)((()=>{(async()=>{isLoadingRef.current=!0,lastUserRef.current=args.user;try{const docRef=(0,index_esm.H9)(firebase.db,args.user,"shopbyage"),snap=await(0,index_esm.x7)(docRef);if(snap.exists()){const firestoreData=snap.data();lastSyncedData.current=firestoreData,updateArgs((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)({},currentArgs),firestoreData),{},{user:args.user}))}}catch(e){console.error("Firestore load error:",e)}isLoadingRef.current=!1})()}),[args.user]),(0,react.useEffect)((()=>{if(isLoadingRef.current)return;const selectedUser=lastUserRef.current;if(currentArgs.user!==selectedUser)return;const{user}=currentArgs,fields=(0,objectWithoutProperties.A)(currentArgs,_excluded),prevFields=lastSyncedData.current;if(!Object.entries(fields).some((_ref=>{let[k,v]=_ref;return prevFields[k]!==v})))return;lastSyncedData.current=fields;(async()=>{try{const docRef=(0,index_esm.H9)(firebase.db,selectedUser,"shopbyage");await(0,index_esm.mZ)(docRef,fields),console.log("UPDATED:",selectedUser,fields)}catch(e){console.error("Firestore update error:",e)}})()}),[currentArgs]),(0,jsx_runtime.jsx)(ShopByAge,(0,objectSpread2.A)({},args))}},__namedExportsOrder=["ShopByAgeRoundals"];ShopByAgeRoundals.parameters={...ShopByAgeRoundals.parameters,docs:{...ShopByAgeRoundals.parameters?.docs,source:{originalSource:"{\n  args: {\n    user: 'stories',\n    images: false,\n    roundal1image: '',\n    roundal1background: '',\n    roundal1color: '',\n    roundal1alt: '',\n    roundal1age: '',\n    roundal1textunderage: '',\n    roundal1link: '',\n    roundal2image: '',\n    roundal2background: '',\n    roundal2color: '',\n    roundal2alt: '',\n    roundal2age: '',\n    roundal2textunderage: '',\n    roundal2link: '',\n    roundal3image: '',\n    roundal3background: '',\n    roundal3color: '',\n    roundal3alt: '',\n    roundal3age: '',\n    roundal3textunderage: '',\n    roundal3link: '',\n    roundal4image: '',\n    roundal4background: '',\n    roundal4color: '',\n    roundal4alt: '',\n    roundal4age: '',\n    roundal4textunderage: '',\n    roundal4link: '',\n    roundal5image: '',\n    roundal5background: '',\n    roundal5color: '',\n    roundal5alt: '',\n    roundal5age: '',\n    roundal5textunderage: '',\n    roundal5link: '',\n    roundal6image: '',\n    roundal6background: '',\n    roundal6color: '',\n    roundal6alt: '',\n    roundal6age: '',\n    roundal6textunderage: '',\n    roundal6link: '',\n    rounbdal1dataelementtype: '',\n    rounbdal1datapromotionindex: '',\n    roundal1datapromotionname: '',\n    roundal2dataelementtype: '',\n    roundal2datapromotionindex: '',\n    roundal2datapromotionname: '',\n    roundal3dataelementtype: '',\n    roundal3datapromotionindex: '',\n    roundal3datapromotionname: '',\n    roundal4dataelementtype: '',\n    roundal4datapromotionindex: '',\n    roundal4datapromotionname: '',\n    roundal5dataelementtype: '',\n    roundal5datapromotionindex: '',\n    roundal5datapromotionname: '',\n    roundal6dataelementtype: '',\n    roundal6datapromotionindex: '',\n    roundal6datapromotionname: ''\n  },\n  render: function Render(args) {\n    const [currentArgs, updateArgs] = useArgs();\n    const isLoadingRef = useRef(false); // prevents writing during load\n    const lastUserRef = useRef(args.user); // track selected user\n    const lastSyncedData = useRef({}); // prevent write loops\n\n    // -------------------------------------------------------\n    // 1. LOAD DATA FROM SELECTED USER\n    // -------------------------------------------------------\n    useEffect(() => {\n      const load = async () => {\n        isLoadingRef.current = true; // BLOCK updates\n        lastUserRef.current = args.user;\n        try {\n          const docRef = doc(db, args.user, \"shopbyage\");\n          const snap = await getDoc(docRef);\n          if (snap.exists()) {\n            const firestoreData = snap.data();\n            lastSyncedData.current = firestoreData;\n\n            // Replace storybook args with loaded data\n            updateArgs({\n              ...currentArgs,\n              ...firestoreData,\n              user: args.user\n            });\n          }\n        } catch (e) {\n          console.error(\"Firestore load error:\", e);\n        }\n        isLoadingRef.current = false; // allow updates again\n      };\n      load();\n    }, [args.user]);\n\n    // -------------------------------------------------------\n    // 2. SYNC ONLY FIELD CHANGES (NOT USER CHANGE)\n    // -------------------------------------------------------\n    useEffect(() => {\n      if (isLoadingRef.current) return; // Don't sync during load\n\n      const selectedUser = lastUserRef.current;\n\n      // Don't sync if this change is caused by selecting a new user\n      if (currentArgs.user !== selectedUser) return;\n\n      // Remove user field before writing\n      const {\n        user,\n        ...fields\n      } = currentArgs;\n\n      // Prevent re-writing unchanged data\n      const prevFields = lastSyncedData.current;\n      const changed = Object.entries(fields).some(([k, v]) => prevFields[k] !== v);\n      if (!changed) return;\n      lastSyncedData.current = fields;\n      const send = async () => {\n        try {\n          const docRef = doc(db, selectedUser, \"shopbyage\");\n          await updateDoc(docRef, fields);\n          console.log(\"UPDATED:\", selectedUser, fields);\n        } catch (e) {\n          console.error(\"Firestore update error:\", e);\n        }\n      };\n      send();\n    }, [currentArgs]);\n    return <ShopByAge {...args} />;\n  }\n}",...ShopByAgeRoundals.parameters?.docs?.source}}}}}]);